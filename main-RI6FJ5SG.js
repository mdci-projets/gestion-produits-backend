import{a as W,b as yi,c as qs,d as Ls,e as _i,f as Bs,q as Fs,r as js,u as Us}from"./chunk-N2IH4DC7.js";import{a as Rs,b as Ds}from"./chunk-4EZRYZR3.js";import{$ as an,A as v,B as he,C as Os,D as di,E as Ms,F as Ue,G as fi,H as pi,K as ut,L as mi,M as on,N as gi,W as xs,Z as Is,_ as Ps,a as Ts,ba as ln,o as ks,p as Cs,u as As,x as Ns}from"./chunk-NTQFL2KH.js";import{B as ys,C as _s,D as bs,E as vs,F as Ss,J as Es,L as ws,a as sn,d as rs,e as at,h as lt,k as ss,l as os,n as as,o as ls,p as cs,q as us,r as hs,s as ds,t as Me,u as fs,v as ps,w as ms,x as ct,y as gs}from"./chunk-6LSA2XQ7.js";import{$ as ce,Ab as si,Ba as $r,Cb as Yr,Eb as Zr,F as en,Hb as rn,Ib as es,Jb as je,Ka as ni,Nb as oi,Ob as ai,Pb as li,Sa as M,Tb as q,Ua as Kr,Ub as ts,V as Hr,Va as Qr,Vb as Tt,Wb as ci,Xa as ee,Xb as ui,Y as E,Yb as hi,a as le,aa as ei,c as Ur,ca as ti,cb as be,cc as ns,d as f,db as ii,e as yc,ea as _e,eb as nn,f as Et,fa as k,fc as is,gb as Gr,hb as ue,l as Fe,m as Vr,na as zr,nb as Xr,oa as Wr,ob as te,r as Zt,sb as Jr,ta as ot,wb as O,xb as C,ya as tn,yb as wt,zb as ri}from"./chunk-TRC53F5N.js";var Hs=f((Lf,bi)=>{"use strict";global.crypto&&global.crypto.getRandomValues?bi.exports.randomBytes=function(i){var e=new Uint8Array(i);return global.crypto.getRandomValues(e),e}:bi.exports.randomBytes=function(i){for(var e=new Array(i),t=0;t<i;t++)e[t]=Math.floor(Math.random()*256);return e}});var He=f((Bf,Ws)=>{"use strict";var _c=Hs(),zs="abcdefghijklmnopqrstuvwxyz012345";Ws.exports={string:function(i){for(var e=zs.length,t=_c.randomBytes(i),n=[],r=0;r<i;r++)n.push(zs.substr(t[r]%e,1));return n.join("")},number:function(i){return Math.floor(Math.random()*i)},numberString:function(i){var e=(""+(i-1)).length,t=new Array(e+1).join("0");return(t+this.number(i)).slice(-e)}}});var ve=f((Ff,dn)=>{"use strict";var bc=He(),ht={},vi=!1,$s=global.chrome&&global.chrome.app&&global.chrome.app.runtime;dn.exports={attachEvent:function(i,e){typeof global.addEventListener<"u"?global.addEventListener(i,e,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+i,e),global.attachEvent("on"+i,e))},detachEvent:function(i,e){typeof global.addEventListener<"u"?global.removeEventListener(i,e,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+i,e),global.detachEvent("on"+i,e))},unloadAdd:function(i){if($s)return null;var e=bc.string(8);return ht[e]=i,vi&&setTimeout(this.triggerUnloadCallbacks,0),e},unloadDel:function(i){i in ht&&delete ht[i]},triggerUnloadCallbacks:function(){for(var i in ht)ht[i](),delete ht[i]}};var vc=function(){vi||(vi=!0,dn.exports.triggerUnloadCallbacks())};$s||dn.exports.attachEvent("unload",vc)});var Qs=f((jf,Ks)=>{"use strict";Ks.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}});var Js=f(Si=>{"use strict";var Sc=Object.prototype.hasOwnProperty,Ec;function Gs(i){try{return decodeURIComponent(i.replace(/\+/g," "))}catch{return null}}function Xs(i){try{return encodeURIComponent(i)}catch{return null}}function wc(i){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},n;n=e.exec(i);){var r=Gs(n[1]),s=Gs(n[2]);r===null||s===null||r in t||(t[r]=s)}return t}function Tc(i,e){e=e||"";var t=[],n,r;typeof e!="string"&&(e="?");for(r in i)if(Sc.call(i,r)){if(n=i[r],!n&&(n===null||n===Ec||isNaN(n))&&(n=""),r=Xs(r),n=Xs(n),r===null||n===null)continue;t.push(r+"="+n)}return t.length?e+t.join("&"):""}Si.stringify=Tc;Si.parse=wc});var Ti=f((Vf,ro)=>{"use strict";var Zs=Qs(),fn=Js(),kc=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,eo=/[\n\r\t]/g,Cc=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,to=/:\d+$/,Ac=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Nc=/^[a-zA-Z]:/;function wi(i){return(i||"").toString().replace(kc,"")}var Ei=[["#","hash"],["?","query"],function(e,t){return de(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Ys={hash:1,query:1};function no(i){var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e={};var t=e.location||{};i=i||t;var n={},r=typeof i,s;if(i.protocol==="blob:")n=new fe(unescape(i.pathname),{});else if(r==="string"){n=new fe(i,{});for(s in Ys)delete n[s]}else if(r==="object"){for(s in i)s in Ys||(n[s]=i[s]);n.slashes===void 0&&(n.slashes=Cc.test(i.href))}return n}function de(i){return i==="file:"||i==="ftp:"||i==="http:"||i==="https:"||i==="ws:"||i==="wss:"}function io(i,e){i=wi(i),i=i.replace(eo,""),e=e||{};var t=Ac.exec(i),n=t[1]?t[1].toLowerCase():"",r=!!t[2],s=!!t[3],o=0,a;return r?s?(a=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(a=t[2]+t[4],o=t[2].length):s?(a=t[3]+t[4],o=t[3].length):a=t[4],n==="file:"?o>=2&&(a=a.slice(2)):de(n)?a=t[4]:n?r&&(a=a.slice(2)):o>=2&&de(e.protocol)&&(a=t[4]),{protocol:n,slashes:r||de(n),slashesCount:o,rest:a}}function Oc(i,e){if(i==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(i.split("/")),n=t.length,r=t[n-1],s=!1,o=0;n--;)t[n]==="."?t.splice(n,1):t[n]===".."?(t.splice(n,1),o++):o&&(n===0&&(s=!0),t.splice(n,1),o--);return s&&t.unshift(""),(r==="."||r==="..")&&t.push(""),t.join("/")}function fe(i,e,t){if(i=wi(i),i=i.replace(eo,""),!(this instanceof fe))return new fe(i,e,t);var n,r,s,o,a,l,c=Ei.slice(),h=typeof e,u=this,g=0;for(h!=="object"&&h!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=fn.parse),e=no(e),r=io(i||"",e),n=!r.protocol&&!r.slashes,u.slashes=r.slashes||n&&e.slashes,u.protocol=r.protocol||e.protocol||"",i=r.rest,(r.protocol==="file:"&&(r.slashesCount!==2||Nc.test(i))||!r.slashes&&(r.protocol||r.slashesCount<2||!de(u.protocol)))&&(c[3]=[/(.*)/,"pathname"]);g<c.length;g++){if(o=c[g],typeof o=="function"){i=o(i,u);continue}s=o[0],l=o[1],s!==s?u[l]=i:typeof s=="string"?(a=s==="@"?i.lastIndexOf(s):i.indexOf(s),~a&&(typeof o[2]=="number"?(u[l]=i.slice(0,a),i=i.slice(a+o[2])):(u[l]=i.slice(a),i=i.slice(0,a)))):(a=s.exec(i))&&(u[l]=a[1],i=i.slice(0,a.index)),u[l]=u[l]||n&&o[3]&&e[l]||"",o[4]&&(u[l]=u[l].toLowerCase())}t&&(u.query=t(u.query)),n&&e.slashes&&u.pathname.charAt(0)!=="/"&&(u.pathname!==""||e.pathname!=="")&&(u.pathname=Oc(u.pathname,e.pathname)),u.pathname.charAt(0)!=="/"&&de(u.protocol)&&(u.pathname="/"+u.pathname),Zs(u.port,u.protocol)||(u.host=u.hostname,u.port=""),u.username=u.password="",u.auth&&(a=u.auth.indexOf(":"),~a?(u.username=u.auth.slice(0,a),u.username=encodeURIComponent(decodeURIComponent(u.username)),u.password=u.auth.slice(a+1),u.password=encodeURIComponent(decodeURIComponent(u.password))):u.username=encodeURIComponent(decodeURIComponent(u.auth)),u.auth=u.password?u.username+":"+u.password:u.username),u.origin=u.protocol!=="file:"&&de(u.protocol)&&u.host?u.protocol+"//"+u.host:"null",u.href=u.toString()}function Mc(i,e,t){var n=this;switch(i){case"query":typeof e=="string"&&e.length&&(e=(t||fn.parse)(e)),n[i]=e;break;case"port":n[i]=e,Zs(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[i]="");break;case"hostname":n[i]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[i]=e,to.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!t;break;case"pathname":case"hash":if(e){var r=i==="pathname"?"/":"#";n[i]=e.charAt(0)!==r?r+e:e}else n[i]=e;break;case"username":case"password":n[i]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(n.username=e.slice(0,s),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=e.slice(s+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<Ei.length;o++){var a=Ei[o];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&de(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function xc(i){(!i||typeof i!="function")&&(i=fn.stringify);var e,t=this,n=t.host,r=t.protocol;r&&r.charAt(r.length-1)!==":"&&(r+=":");var s=r+(t.protocol&&t.slashes||de(t.protocol)?"//":"");return t.username?(s+=t.username,t.password&&(s+=":"+t.password),s+="@"):t.password?(s+=":"+t.password,s+="@"):t.protocol!=="file:"&&de(t.protocol)&&!n&&t.pathname!=="/"&&(s+="@"),(n[n.length-1]===":"||to.test(t.hostname)&&!t.port)&&(n+=":"),s+=n+t.pathname,e=typeof t.query=="object"?i(t.query):t.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(s+=t.hash),s}fe.prototype={set:Mc,toString:xc};fe.extractProtocol=io;fe.location=no;fe.trimLeft=wi;fe.qs=fn;ro.exports=fe});var K=f((Hf,so)=>{"use strict";var Ic=Ti(),Pc=function(){};so.exports={getOrigin:function(i){if(!i)return null;var e=new Ic(i);if(e.protocol==="file:")return null;var t=e.port;return t||(t=e.protocol==="https:"?"443":"80"),e.protocol+"//"+e.hostname+":"+t},isOriginEqual:function(i,e){var t=this.getOrigin(i)===this.getOrigin(e);return Pc("same",i,e,t),t},isSchemeEqual:function(i,e){return i.split(":")[0]===e.split(":")[0]},addPath:function(i,e){var t=i.split("?");return t[0]+e+(t[1]?"?"+t[1]:"")},addQuery:function(i,e){return i+(i.indexOf("?")===-1?"?"+e:"&"+e)},isLoopbackAddr:function(i){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(i)||/^\[::1\]$/.test(i)}}});var w=f((zf,ki)=>{"use strict";typeof Object.create=="function"?ki.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ki.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Ci=f((Wf,oo)=>{"use strict";function pn(){this._listeners={}}pn.prototype.addEventListener=function(i,e){i in this._listeners||(this._listeners[i]=[]);var t=this._listeners[i];t.indexOf(e)===-1&&(t=t.concat([e])),this._listeners[i]=t};pn.prototype.removeEventListener=function(i,e){var t=this._listeners[i];if(t){var n=t.indexOf(e);if(n!==-1){t.length>1?this._listeners[i]=t.slice(0,n).concat(t.slice(n+1)):delete this._listeners[i];return}}};pn.prototype.dispatchEvent=function(){var i=arguments[0],e=i.type,t=arguments.length===1?[i]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,t),e in this._listeners)for(var n=this._listeners[e],r=0;r<n.length;r++)n[r].apply(this,t)};oo.exports=pn});var F=f(($f,ao)=>{"use strict";var Rc=w(),mn=Ci();function xe(){mn.call(this)}Rc(xe,mn);xe.prototype.removeAllListeners=function(i){i?delete this._listeners[i]:this._listeners={}};xe.prototype.once=function(i,e){var t=this,n=!1;function r(){t.removeListener(i,r),n||(n=!0,e.apply(this,arguments))}this.on(i,r)};xe.prototype.emit=function(){var i=arguments[0],e=this._listeners[i];if(e){for(var t=arguments.length,n=new Array(t-1),r=1;r<t;r++)n[r-1]=arguments[r];for(var s=0;s<e.length;s++)e[s].apply(this,n)}};xe.prototype.on=xe.prototype.addListener=mn.prototype.addEventListener;xe.prototype.removeListener=mn.prototype.removeEventListener;ao.exports.EventEmitter=xe});var co=f((Kf,Ai)=>{"use strict";var lo=global.WebSocket||global.MozWebSocket;lo?Ai.exports=function(e){return new lo(e)}:Ai.exports=void 0});var mo=f((Qf,po)=>{"use strict";var uo=ve(),Dc=K(),qc=w(),ho=F().EventEmitter,fo=co(),Se=function(){};function Ee(i,e,t){if(!Ee.enabled())throw new Error("Transport created when disabled");ho.call(this),Se("constructor",i);var n=this,r=Dc.addPath(i,"/websocket");r.slice(0,5)==="https"?r="wss"+r.slice(5):r="ws"+r.slice(4),this.url=r,this.ws=new fo(this.url,[],t),this.ws.onmessage=function(s){Se("message event",s.data),n.emit("message",s.data)},this.unloadRef=uo.unloadAdd(function(){Se("unload"),n.ws.close()}),this.ws.onclose=function(s){Se("close event",s.code,s.reason),n.emit("close",s.code,s.reason),n._cleanup()},this.ws.onerror=function(s){Se("error event",s),n.emit("close",1006,"WebSocket connection broken"),n._cleanup()}}qc(Ee,ho);Ee.prototype.send=function(i){var e="["+i+"]";Se("send",e),this.ws.send(e)};Ee.prototype.close=function(){Se("close");var i=this.ws;this._cleanup(),i&&i.close()};Ee.prototype._cleanup=function(){Se("_cleanup");var i=this.ws;i&&(i.onmessage=i.onclose=i.onerror=null),uo.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};Ee.enabled=function(){return Se("enabled"),!!fo};Ee.transportName="websocket";Ee.roundTrips=2;po.exports=Ee});var _o=f((Gf,yo)=>{"use strict";var Lc=w(),go=F().EventEmitter,we=function(){};function ze(i,e){we(i),go.call(this),this.sendBuffer=[],this.sender=e,this.url=i}Lc(ze,go);ze.prototype.send=function(i){we("send",i),this.sendBuffer.push(i),this.sendStop||this.sendSchedule()};ze.prototype.sendScheduleWait=function(){we("sendScheduleWait");var i=this,e;this.sendStop=function(){we("sendStop"),i.sendStop=null,clearTimeout(e)},e=setTimeout(function(){we("timeout"),i.sendStop=null,i.sendSchedule()},25)};ze.prototype.sendSchedule=function(){we("sendSchedule",this.sendBuffer.length);var i=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,function(t){i.sendStop=null,t?(we("error",t),i.emit("close",t.code||1006,"Sending error: "+t),i.close()):i.sendScheduleWait()}),this.sendBuffer=[]}};ze.prototype._cleanup=function(){we("_cleanup"),this.removeAllListeners()};ze.prototype.close=function(){we("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};yo.exports=ze});var So=f((Xf,vo)=>{"use strict";var Bc=w(),bo=F().EventEmitter,Ct=function(){};function gn(i,e,t){Ct(e),bo.call(this),this.Receiver=i,this.receiveUrl=e,this.AjaxObject=t,this._scheduleReceiver()}Bc(gn,bo);gn.prototype._scheduleReceiver=function(){Ct("_scheduleReceiver");var i=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",function(t){Ct("message",t),i.emit("message",t)}),e.once("close",function(t,n){Ct("close",t,n,i.pollIsClosing),i.poll=e=null,i.pollIsClosing||(n==="network"?i._scheduleReceiver():(i.emit("close",t||1006,n),i.removeAllListeners()))})};gn.prototype.abort=function(){Ct("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};vo.exports=gn});var Mi=f((Jf,Eo)=>{"use strict";var Fc=w(),jc=K(),Ni=_o(),Uc=So(),yn=function(){};function Oi(i,e,t,n,r){var s=jc.addPath(i,e);yn(s);var o=this;Ni.call(this,i,t),this.poll=new Uc(n,s,r),this.poll.on("message",function(a){yn("poll message",a),o.emit("message",a)}),this.poll.once("close",function(a,l){yn("poll close",a,l),o.poll=null,o.emit("close",a,l),o.close()})}Fc(Oi,Ni);Oi.prototype.close=function(){Ni.prototype.close.call(this),yn("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};Eo.exports=Oi});var We=f((Yf,ko)=>{"use strict";var Vc=w(),Hc=K(),wo=Mi(),xi=function(){};function zc(i){return function(e,t,n){xi("create ajax sender",e,t);var r={};typeof t=="string"&&(r.headers={"Content-type":"text/plain"});var s=Hc.addPath(e,"/xhr_send"),o=new i("POST",s,t,r);return o.once("finish",function(a){if(xi("finish",a),o=null,a!==200&&a!==204)return n(new Error("http status "+a));n()}),function(){xi("abort"),o.close(),o=null;var a=new Error("Aborted");a.code=1e3,n(a)}}}function To(i,e,t,n){wo.call(this,i,e,zc(n),t,n)}Vc(To,wo);ko.exports=To});var Nt=f((Zf,Ao)=>{"use strict";var Wc=w(),Co=F().EventEmitter,Ie=function(){};function At(i,e){Ie(i),Co.call(this);var t=this;this.bufferPosition=0,this.xo=new e("POST",i,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(n,r){Ie("finish",n,r),t._chunkHandler(n,r),t.xo=null;var s=n===200?"network":"permanent";Ie("close",s),t.emit("close",null,s),t._cleanup()})}Wc(At,Co);At.prototype._chunkHandler=function(i,e){if(Ie("_chunkHandler",i),!(i!==200||!e))for(var t=-1;;this.bufferPosition+=t+1){var n=e.slice(this.bufferPosition);if(t=n.indexOf(`
`),t===-1)break;var r=n.slice(0,t);r&&(Ie("message",r),this.emit("message",r))}};At.prototype._cleanup=function(){Ie("_cleanup"),this.removeAllListeners()};At.prototype.abort=function(){Ie("abort"),this.xo&&(this.xo.close(),Ie("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()};Ao.exports=At});var Ii=f((ep,Io)=>{"use strict";var Oo=F().EventEmitter,$c=w(),Mo=ve(),Kc=K(),Ot=global.XMLHttpRequest,H=function(){};function pe(i,e,t,n){H(i,e);var r=this;Oo.call(this),setTimeout(function(){r._start(i,e,t,n)},0)}$c(pe,Oo);pe.prototype._start=function(i,e,t,n){var r=this;try{this.xhr=new Ot}catch{}if(!this.xhr){H("no xhr"),this.emit("finish",0,"no xhr support"),this._cleanup();return}e=Kc.addQuery(e,"t="+ +new Date),this.unloadRef=Mo.unloadAdd(function(){H("unload cleanup"),r._cleanup(!0)});try{this.xhr.open(i,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){H("xhr timeout"),r.emit("finish",0,""),r._cleanup(!1)})}catch(o){H("exception",o),this.emit("finish",0,""),this._cleanup(!1);return}if((!n||!n.noCredentials)&&pe.supportsCORS&&(H("withCredentials"),this.xhr.withCredentials=!0),n&&n.headers)for(var s in n.headers)this.xhr.setRequestHeader(s,n.headers[s]);this.xhr.onreadystatechange=function(){if(r.xhr){var o=r.xhr,a,l;switch(H("readyState",o.readyState),o.readyState){case 3:try{l=o.status,a=o.responseText}catch{}H("status",l),l===1223&&(l=204),l===200&&a&&a.length>0&&(H("chunk"),r.emit("chunk",l,a));break;case 4:l=o.status,H("status",l),l===1223&&(l=204),(l===12005||l===12029)&&(l=0),H("finish",l,o.responseText),r.emit("finish",l,o.responseText),r._cleanup(!1);break}}};try{r.xhr.send(t)}catch{r.emit("finish",0,""),r._cleanup(!1)}};pe.prototype._cleanup=function(i){if(H("cleanup"),!!this.xhr){if(this.removeAllListeners(),Mo.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),i)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};pe.prototype.close=function(){H("close"),this._cleanup(!0)};pe.enabled=!!Ot;var No=["Active"].concat("Object").join("X");!pe.enabled&&No in global&&(H("overriding xmlhttprequest"),Ot=function(){try{return new global[No]("Microsoft.XMLHTTP")}catch{return null}},pe.enabled=!!new Ot);var xo=!1;try{xo="withCredentials"in new Ot}catch{}pe.supportsCORS=xo;Io.exports=pe});var Mt=f((tp,Po)=>{"use strict";var Qc=w(),_n=Ii();function Pi(i,e,t,n){_n.call(this,i,e,t,n)}Qc(Pi,_n);Pi.enabled=_n.enabled&&_n.supportsCORS;Po.exports=Pi});var dt=f((np,Ro)=>{"use strict";var Gc=w(),Ri=Ii();function Di(i,e,t){Ri.call(this,i,e,t,{noCredentials:!0})}Gc(Di,Ri);Di.enabled=Ri.enabled;Ro.exports=Di});var ft=f((ip,Do)=>{"use strict";Do.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch{return!1}}}});var Bo=f((rp,Lo)=>{"use strict";var Xc=w(),qo=We(),Jc=Nt(),qi=Mt(),Yc=dt(),Zc=ft();function pt(i){if(!Yc.enabled&&!qi.enabled)throw new Error("Transport created when disabled");qo.call(this,i,"/xhr_streaming",Jc,qi)}Xc(pt,qo);pt.enabled=function(i){return i.nullOrigin||Zc.isOpera()?!1:qi.enabled};pt.transportName="xhr-streaming";pt.roundTrips=2;pt.needBody=!!global.document;Lo.exports=pt});var bn=f((sp,Uo)=>{"use strict";var Fo=F().EventEmitter,eu=w(),jo=ve(),tu=ft(),nu=K(),Pe=function(){};function $e(i,e,t){Pe(i,e);var n=this;Fo.call(this),setTimeout(function(){n._start(i,e,t)},0)}eu($e,Fo);$e.prototype._start=function(i,e,t){Pe("_start");var n=this,r=new global.XDomainRequest;e=nu.addQuery(e,"t="+ +new Date),r.onerror=function(){Pe("onerror"),n._error()},r.ontimeout=function(){Pe("ontimeout"),n._error()},r.onprogress=function(){Pe("progress",r.responseText),n.emit("chunk",200,r.responseText)},r.onload=function(){Pe("load"),n.emit("finish",200,r.responseText),n._cleanup(!1)},this.xdr=r,this.unloadRef=jo.unloadAdd(function(){n._cleanup(!0)});try{this.xdr.open(i,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(t)}catch{this._error()}};$e.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};$e.prototype._cleanup=function(i){if(Pe("cleanup",i),!!this.xdr){if(this.removeAllListeners(),jo.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,i)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};$e.prototype.close=function(){Pe("close"),this._cleanup(!0)};$e.enabled=!!(global.XDomainRequest&&tu.hasDomain());Uo.exports=$e});var Bi=f((op,Ho)=>{"use strict";var iu=w(),Vo=We(),ru=Nt(),Li=bn();function xt(i){if(!Li.enabled)throw new Error("Transport created when disabled");Vo.call(this,i,"/xhr_streaming",ru,Li)}iu(xt,Vo);xt.enabled=function(i){return i.cookie_needed||i.nullOrigin?!1:Li.enabled&&i.sameScheme};xt.transportName="xdr-streaming";xt.roundTrips=2;Ho.exports=xt});var Fi=f((ap,zo)=>{"use strict";zo.exports=global.EventSource});var Ko=f((lp,$o)=>{"use strict";var su=w(),Wo=F().EventEmitter,ou=Fi(),mt=function(){};function It(i){mt(i),Wo.call(this);var e=this,t=this.es=new ou(i);t.onmessage=function(n){mt("message",n.data),e.emit("message",decodeURI(n.data))},t.onerror=function(n){mt("error",t.readyState,n);var r=t.readyState!==2?"network":"permanent";e._cleanup(),e._close(r)}}su(It,Wo);It.prototype.abort=function(){mt("abort"),this._cleanup(),this._close("user")};It.prototype._cleanup=function(){mt("cleanup");var i=this.es;i&&(i.onmessage=i.onerror=null,i.close(),this.es=null)};It.prototype._close=function(i){mt("close",i);var e=this;setTimeout(function(){e.emit("close",null,i),e.removeAllListeners()},200)};$o.exports=It});var ji=f((cp,Go)=>{"use strict";var au=w(),Qo=We(),lu=Ko(),cu=Mt(),uu=Fi();function gt(i){if(!gt.enabled())throw new Error("Transport created when disabled");Qo.call(this,i,"/eventsource",lu,cu)}au(gt,Qo);gt.enabled=function(){return!!uu};gt.transportName="eventsource";gt.roundTrips=2;Go.exports=gt});var Ui=f((up,Xo)=>{"use strict";Xo.exports="1.6.1"});var yt=f((hp,Te)=>{"use strict";var vn=ve(),hu=ft(),Ke=function(){};Te.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){Te.exports.WPrefix in global||(global[Te.exports.WPrefix]={})},postMessage:function(i,e){global.parent!==global?global.parent.postMessage(JSON.stringify({windowId:Te.exports.currentWindowId,type:i,data:e||""}),"*"):Ke("Cannot postMessage, no parent window.",i,e)},createIframe:function(i,e){var t=global.document.createElement("iframe"),n,r,s=function(){Ke("unattach"),clearTimeout(n);try{t.onload=null}catch{}t.onerror=null},o=function(){Ke("cleanup"),t&&(s(),setTimeout(function(){t&&t.parentNode.removeChild(t),t=null},0),vn.unloadDel(r))},a=function(c){Ke("onerror",c),t&&(o(),e(c))},l=function(c,h){Ke("post",c,h),setTimeout(function(){try{t&&t.contentWindow&&t.contentWindow.postMessage(c,h)}catch{}},0)};return t.src=i,t.style.display="none",t.style.position="absolute",t.onerror=function(){a("onerror")},t.onload=function(){Ke("onload"),clearTimeout(n),n=setTimeout(function(){a("onload timeout")},2e3)},global.document.body.appendChild(t),n=setTimeout(function(){a("timeout")},15e3),r=vn.unloadAdd(o),{post:l,cleanup:o,loaded:s}},createHtmlfile:function(i,e){var t=["Active"].concat("Object").join("X"),n=new global[t]("htmlfile"),r,s,o,a=function(){clearTimeout(r),o.onerror=null},l=function(){n&&(a(),vn.unloadDel(s),o.parentNode.removeChild(o),o=n=null,CollectGarbage())},c=function(g){Ke("onerror",g),n&&(l(),e(g))},h=function(g,_){try{setTimeout(function(){o&&o.contentWindow&&o.contentWindow.postMessage(g,_)},0)}catch{}};n.open(),n.write('<html><script>document.domain="'+global.document.domain+'";<\/script></html>'),n.close(),n.parentWindow[Te.exports.WPrefix]=global[Te.exports.WPrefix];var u=n.createElement("div");return n.body.appendChild(u),o=n.createElement("iframe"),u.appendChild(o),o.src=i,o.onerror=function(){c("onerror")},r=setTimeout(function(){c("timeout")},15e3),s=vn.unloadAdd(l),{post:h,cleanup:l,loaded:a}}};Te.exports.iframeEnabled=!1;global.document&&(Te.exports.iframeEnabled=(typeof global.postMessage=="function"||typeof global.postMessage=="object")&&!hu.isKonqueror())});var Hi=f((dp,ea)=>{"use strict";var du=w(),Jo=F().EventEmitter,fu=Ui(),Vi=K(),Yo=yt(),Zo=ve(),pu=He(),me=function(){};function ge(i,e,t){if(!ge.enabled())throw new Error("Transport created when disabled");Jo.call(this);var n=this;this.origin=Vi.getOrigin(t),this.baseUrl=t,this.transUrl=e,this.transport=i,this.windowId=pu.string(8);var r=Vi.addPath(t,"/iframe.html")+"#"+this.windowId;me(i,e,r),this.iframeObj=Yo.createIframe(r,function(s){me("err callback"),n.emit("close",1006,"Unable to load an iframe ("+s+")"),n.close()}),this.onmessageCallback=this._message.bind(this),Zo.attachEvent("message",this.onmessageCallback)}du(ge,Jo);ge.prototype.close=function(){if(me("close"),this.removeAllListeners(),this.iframeObj){Zo.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};ge.prototype._message=function(i){if(me("message",i.data),!Vi.isOriginEqual(i.origin,this.origin)){me("not same origin",i.origin,this.origin);return}var e;try{e=JSON.parse(i.data)}catch{me("bad json",i.data);return}if(e.windowId!==this.windowId){me("mismatched window id",e.windowId,this.windowId);return}switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([fu,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var t;try{t=JSON.parse(e.data)}catch{me("bad json",e.data);return}this.emit("close",t[0],t[1]),this.close();break}};ge.prototype.postMessage=function(i,e){me("postMessage",i,e),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:i,data:e||""}),this.origin)};ge.prototype.send=function(i){me("send",i),this.postMessage("m",i)};ge.enabled=function(){return Yo.iframeEnabled};ge.transportName="iframe";ge.roundTrips=2;ea.exports=ge});var Sn=f((fp,ta)=>{"use strict";ta.exports={isObject:function(i){var e=typeof i;return e==="function"||e==="object"&&!!i},extend:function(i){if(!this.isObject(i))return i;for(var e,t,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i}}});var wn=f((pp,na)=>{"use strict";var mu=w(),En=Hi(),gu=Sn();na.exports=function(i){function e(t,n){En.call(this,i.transportName,t,n)}return mu(e,En),e.enabled=function(t,n){if(!global.document)return!1;var r=gu.extend({},n);return r.sameOrigin=!0,i.enabled(r)&&En.enabled()},e.transportName="iframe-"+i.transportName,e.needBody=!0,e.roundTrips=En.roundTrips+i.roundTrips-1,e.facadeTransport=i,e}});var oa=f((mp,sa)=>{"use strict";var yu=w(),Qe=yt(),_u=K(),ra=F().EventEmitter,bu=He(),ke=function(){};function ie(i){ke(i),ra.call(this);var e=this;Qe.polluteGlobalNamespace(),this.id="a"+bu.string(6),i=_u.addQuery(i,"c="+decodeURIComponent(Qe.WPrefix+"."+this.id)),ke("using htmlfile",ie.htmlfileEnabled);var t=ie.htmlfileEnabled?Qe.createHtmlfile:Qe.createIframe;global[Qe.WPrefix][this.id]={start:function(){ke("start"),e.iframeObj.loaded()},message:function(n){ke("message",n),e.emit("message",n)},stop:function(){ke("stop"),e._cleanup(),e._close("network")}},this.iframeObj=t(i,function(){ke("callback"),e._cleanup(),e._close("permanent")})}yu(ie,ra);ie.prototype.abort=function(){ke("abort"),this._cleanup(),this._close("user")};ie.prototype._cleanup=function(){ke("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[Qe.WPrefix][this.id]};ie.prototype._close=function(i){ke("_close",i),this.emit("close",null,i),this.removeAllListeners()};ie.htmlfileEnabled=!1;var ia=["Active"].concat("Object").join("X");if(ia in global)try{ie.htmlfileEnabled=!!new global[ia]("htmlfile")}catch{}ie.enabled=ie.htmlfileEnabled||Qe.iframeEnabled;sa.exports=ie});var Wi=f((gp,la)=>{"use strict";var vu=w(),zi=oa(),Su=dt(),aa=We();function Pt(i){if(!zi.enabled)throw new Error("Transport created when disabled");aa.call(this,i,"/htmlfile",zi,Su)}vu(Pt,aa);Pt.enabled=function(i){return zi.enabled&&i.sameOrigin};Pt.transportName="htmlfile";Pt.roundTrips=2;la.exports=Pt});var Ki=f((yp,ha)=>{"use strict";var Eu=w(),ca=We(),wu=Nt(),$i=Mt(),ua=dt();function Rt(i){if(!ua.enabled&&!$i.enabled)throw new Error("Transport created when disabled");ca.call(this,i,"/xhr",wu,$i)}Eu(Rt,ca);Rt.enabled=function(i){return i.nullOrigin?!1:ua.enabled&&i.sameOrigin?!0:$i.enabled};Rt.transportName="xhr-polling";Rt.roundTrips=2;ha.exports=Rt});var ma=f((_p,pa)=>{"use strict";var Tu=w(),fa=We(),ku=Bi(),Cu=Nt(),da=bn();function Dt(i){if(!da.enabled)throw new Error("Transport created when disabled");fa.call(this,i,"/xhr",Cu,da)}Tu(Dt,fa);Dt.enabled=ku.enabled;Dt.transportName="xdr-polling";Dt.roundTrips=2;pa.exports=Dt});var ba=f((bp,_a)=>{"use strict";var qt=yt(),ga=He(),Au=ft(),Nu=K(),Ou=w(),ya=F().EventEmitter,re=function(){};function Y(i){re(i);var e=this;ya.call(this),qt.polluteGlobalNamespace(),this.id="a"+ga.string(6);var t=Nu.addQuery(i,"c="+encodeURIComponent(qt.WPrefix+"."+this.id));global[qt.WPrefix][this.id]=this._callback.bind(this),this._createScript(t),this.timeoutId=setTimeout(function(){re("timeout"),e._abort(new Error("JSONP script loaded abnormally (timeout)"))},Y.timeout)}Ou(Y,ya);Y.prototype.abort=function(){if(re("abort"),global[qt.WPrefix][this.id]){var i=new Error("JSONP user aborted read");i.code=1e3,this._abort(i)}};Y.timeout=35e3;Y.scriptErrorTimeout=1e3;Y.prototype._callback=function(i){re("_callback",i),this._cleanup(),!this.aborting&&(i&&(re("message",i),this.emit("message",i)),this.emit("close",null,"network"),this.removeAllListeners())};Y.prototype._abort=function(i){re("_abort",i),this._cleanup(),this.aborting=!0,this.emit("close",i.code,i.message),this.removeAllListeners()};Y.prototype._cleanup=function(){if(re("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var i=this.script;i.parentNode.removeChild(i),i.onreadystatechange=i.onerror=i.onload=i.onclick=null,this.script=null}delete global[qt.WPrefix][this.id]};Y.prototype._scriptError=function(){re("_scriptError");var i=this;this.errorTimer||(this.errorTimer=setTimeout(function(){i.loadedOkay||i._abort(new Error("JSONP script loaded abnormally (onerror)"))},Y.scriptErrorTimeout))};Y.prototype._createScript=function(i){re("_createScript",i);var e=this,t=this.script=global.document.createElement("script"),n;if(t.id="a"+ga.string(8),t.src=i,t.type="text/javascript",t.charset="UTF-8",t.onerror=this._scriptError.bind(this),t.onload=function(){re("onload"),e._abort(new Error("JSONP script loaded abnormally (onload)"))},t.onreadystatechange=function(){if(re("onreadystatechange",t.readyState),/loaded|closed/.test(t.readyState)){if(t&&t.htmlFor&&t.onclick){e.loadedOkay=!0;try{t.onclick()}catch{}}t&&e._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof t.async>"u"&&global.document.attachEvent)if(Au.isOpera())n=this.script2=global.document.createElement("script"),n.text="try{var a = document.getElementById('"+t.id+"'); if(a)a.onerror();}catch(x){};",t.async=n.async=!1;else{try{t.htmlFor=t.id,t.event="onclick"}catch{}t.async=!0}typeof t.async<"u"&&(t.async=!0);var r=global.document.getElementsByTagName("head")[0];r.insertBefore(t,r.firstChild),n&&r.insertBefore(n,r.firstChild)};_a.exports=Y});var Ea=f((vp,Sa)=>{"use strict";var Mu=He(),va=K(),Ce=function(){},Q,Lt;function xu(i){Ce("createIframe",i);try{return global.document.createElement('<iframe name="'+i+'">')}catch{var e=global.document.createElement("iframe");return e.name=i,e}}function Iu(){Ce("createForm"),Q=global.document.createElement("form"),Q.style.display="none",Q.style.position="absolute",Q.method="POST",Q.enctype="application/x-www-form-urlencoded",Q.acceptCharset="UTF-8",Lt=global.document.createElement("textarea"),Lt.name="d",Q.appendChild(Lt),global.document.body.appendChild(Q)}Sa.exports=function(i,e,t){Ce(i,e),Q||Iu();var n="a"+Mu.string(8);Q.target=n,Q.action=va.addQuery(va.addPath(i,"/jsonp_send"),"i="+n);var r=xu(n);r.id=n,r.style.display="none",Q.appendChild(r);try{Lt.value=e}catch{}Q.submit();var s=function(o){Ce("completed",n,o),r.onerror&&(r.onreadystatechange=r.onerror=r.onload=null,setTimeout(function(){Ce("cleaning up",n),r.parentNode.removeChild(r),r=null},500),Lt.value="",t(o))};return r.onerror=function(){Ce("onerror",n),s()},r.onload=function(){Ce("onload",n),s()},r.onreadystatechange=function(o){Ce("onreadystatechange",n,r.readyState,o),r.readyState==="complete"&&s()},function(){Ce("aborted",n),s(new Error("Aborted"))}}});var ka=f((Sp,Ta)=>{"use strict";var Pu=w(),wa=Mi(),Ru=ba(),Du=Ea();function Ge(i){if(!Ge.enabled())throw new Error("Transport created when disabled");wa.call(this,i,"/jsonp",Du,Ru)}Pu(Ge,wa);Ge.enabled=function(){return!!global.document};Ge.transportName="jsonp-polling";Ge.roundTrips=1;Ge.needBody=!0;Ta.exports=Ge});var Aa=f((Ep,Ca)=>{"use strict";Ca.exports=[mo(),Bo(),Bi(),ji(),wn()(ji()),Wi(),wn()(Wi()),Ki(),ma(),wn()(Ki()),ka()]});var Ra=f(()=>{"use strict";var Bt=Array.prototype,Ji=Object.prototype,qu=Function.prototype,Ft=String.prototype,Qi=Bt.slice,Yi=Ji.toString,Ma=function(i){return Ji.toString.call(i)==="[object Function]"},Lu=function(e){return Yi.call(e)==="[object Array]"},xa=function(e){return Yi.call(e)==="[object String]"},Bu=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),Xi;Bu?Xi=function(i,e,t,n){!n&&e in i||Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:!0,value:t})}:Xi=function(i,e,t,n){!n&&e in i||(i[e]=t)};var jt=function(i,e,t){for(var n in e)Ji.hasOwnProperty.call(e,n)&&Xi(i,n,e[n],t)},Ia=function(i){if(i==null)throw new TypeError("can't convert "+i+" to object");return Object(i)};function Fu(i){var e=+i;return e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function ju(i){return i>>>0}function Gi(){}jt(qu,{bind:function(e){var t=this;if(!Ma(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=Qi.call(arguments,1),r=function(){if(this instanceof l){var c=t.apply(this,n.concat(Qi.call(arguments)));return Object(c)===c?c:this}else return t.apply(e,n.concat(Qi.call(arguments)))},s=Math.max(0,t.length-n.length),o=[],a=0;a<s;a++)o.push("$"+a);var l=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(Gi.prototype=t.prototype,l.prototype=new Gi,Gi.prototype=null),l}});jt(Array,{isArray:Lu});var Na=Object("a"),Pa=Na[0]!=="a"||!(0 in Na),Uu=function(e){var t=!0,n=!0;return e&&(e.call("foo",function(r,s,o){typeof o!="object"&&(t=!1)}),e.call([1],function(){"use strict";n=typeof this=="string"},"x")),!!e&&t&&n};jt(Bt,{forEach:function(e){var t=Ia(this),n=Pa&&xa(this)?this.split(""):t,r=arguments[1],s=-1,o=n.length>>>0;if(!Ma(e))throw new TypeError;for(;++s<o;)s in n&&e.call(r,n[s],s,t)}},!Uu(Bt.forEach));var Vu=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;jt(Bt,{indexOf:function(e){var t=Pa&&xa(this)?this.split(""):Ia(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=Fu(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}},Vu);var Oa=Ft.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var i=/()??/.exec("")[1]===void 0;Ft.split=function(e,t){var n=this;if(e===void 0&&t===0)return[];if(Yi.call(e)!=="[object RegExp]")return Oa.call(this,e,t);var r=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),o=0,a,l,c,h;for(e=new RegExp(e.source,s+"g"),n+="",i||(a=new RegExp("^"+e.source+"$(?!\\s)",s)),t=t===void 0?-1>>>0:ju(t);(l=e.exec(n))&&(c=l.index+l[0].length,!(c>o&&(r.push(n.slice(o,l.index)),!i&&l.length>1&&l[0].replace(a,function(){for(var u=1;u<arguments.length-2;u++)arguments[u]===void 0&&(l[u]=void 0)}),l.length>1&&l.index<n.length&&Bt.push.apply(r,l.slice(1)),h=l[0].length,o=c,r.length>=t)));)e.lastIndex===l.index&&e.lastIndex++;return o===n.length?(h||!e.test(""))&&r.push(""):r.push(n.slice(o)),r.length>t?r.slice(0,t):r}}():"0".split(void 0,0).length&&(Ft.split=function(e,t){return e===void 0&&t===0?[]:Oa.call(this,e,t)});var Hu=Ft.substr,zu="".substr&&"0b".substr(-1)!=="b";jt(Ft,{substr:function(e,t){return Hu.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},zu)});var qa=f((kp,Da)=>{"use strict";var Tn=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,Zi,Wu=function(i){var e,t={},n=[];for(e=0;e<65536;e++)n.push(String.fromCharCode(e));return i.lastIndex=0,n.join("").replace(i,function(r){return t[r]="\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4),""}),i.lastIndex=0,t};Da.exports={quote:function(i){var e=JSON.stringify(i);return Tn.lastIndex=0,Tn.test(e)?(Zi||(Zi=Wu(Tn)),e.replace(Tn,function(t){return Zi[t]})):e}}});var Ba=f((Cp,La)=>{"use strict";var kn=function(){};La.exports=function(i){return{filterToEnabled:function(e,t){var n={main:[],facade:[]};return e?typeof e=="string"&&(e=[e]):e=[],i.forEach(function(r){if(r){if(r.transportName==="websocket"&&t.websocket===!1){kn("disabled from server","websocket");return}if(e.length&&e.indexOf(r.transportName)===-1){kn("not in whitelist",r.transportName);return}r.enabled(t)?(kn("enabled",r.transportName),n.main.push(r),r.facadeTransport&&n.facade.push(r.facadeTransport)):kn("disabled",r.transportName)}}),n}}}});var ja=f((Ap,Fa)=>{"use strict";var er={};["log","debug","warn"].forEach(function(i){var e;try{e=global.console&&global.console[i]&&global.console[i].apply}catch{}er[i]=e?function(){return global.console[i].apply(global.console,arguments)}:i==="log"?function(){}:er.log});Fa.exports=er});var Cn=f((Np,Ua)=>{"use strict";function Xe(i){this.type=i}Xe.prototype.initEvent=function(i,e,t){return this.type=i,this.bubbles=e,this.cancelable=t,this.timeStamp=+new Date,this};Xe.prototype.stopPropagation=function(){};Xe.prototype.preventDefault=function(){};Xe.CAPTURING_PHASE=1;Xe.AT_TARGET=2;Xe.BUBBLING_PHASE=3;Ua.exports=Xe});var tr=f((Op,Va)=>{"use strict";Va.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}});var $a=f((Mp,Wa)=>{"use strict";var $u=w(),Ha=Cn();function za(){Ha.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}$u(za,Ha);Wa.exports=za});var Xa=f((xp,Ga)=>{"use strict";var Ku=w(),Ka=Cn();function Qa(i){Ka.call(this),this.initEvent("message",!1,!1),this.data=i}Ku(Qa,Ka);Ga.exports=Qa});var Za=f((Ip,Ya)=>{"use strict";var Ja=F().EventEmitter,Qu=w();function Ut(){var i=this;Ja.call(this),this.to=setTimeout(function(){i.emit("finish",200,"{}")},Ut.timeout)}Qu(Ut,Ja);Ut.prototype.close=function(){clearTimeout(this.to)};Ut.timeout=2e3;Ya.exports=Ut});var ir=f((Pp,tl)=>{"use strict";var el=F().EventEmitter,Gu=w(),Xu=Sn(),Ju=function(){};function nr(i,e){el.call(this);var t=this,n=+new Date;this.xo=new e("GET",i),this.xo.once("finish",function(r,s){var o,a;if(r===200){if(a=+new Date-n,s)try{o=JSON.parse(s)}catch{Ju("bad json",s)}Xu.isObject(o)||(o={})}t.emit("finish",o,a),t.removeAllListeners()})}Gu(nr,el);nr.prototype.close=function(){this.removeAllListeners(),this.xo.close()};tl.exports=nr});var rr=f((Rp,il)=>{"use strict";var Yu=w(),nl=F().EventEmitter,Zu=dt(),eh=ir();function An(i){var e=this;nl.call(this),this.ir=new eh(i,Zu),this.ir.once("finish",function(t,n){e.ir=null,e.emit("message",JSON.stringify([t,n]))})}Yu(An,nl);An.transportName="iframe-info-receiver";An.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};il.exports=An});var al=f((Dp,ol)=>{"use strict";var rl=F().EventEmitter,th=w(),nh=ve(),sl=Hi(),ih=rr(),rh=function(){};function Nn(i,e){var t=this;rl.call(this);var n=function(){var r=t.ifr=new sl(ih.transportName,e,i);r.once("message",function(s){if(s){var o;try{o=JSON.parse(s)}catch{rh("bad json",s),t.emit("finish"),t.close();return}var a=o[0],l=o[1];t.emit("finish",a,l)}t.close()}),r.once("close",function(){t.emit("finish"),t.close()})};global.document.body?n():nh.attachEvent("load",n)}th(Nn,rl);Nn.enabled=function(){return sl.enabled()};Nn.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};ol.exports=Nn});var fl=f((qp,dl)=>{"use strict";var hl=F().EventEmitter,sh=w(),oh=K(),ll=bn(),cl=Mt(),ah=dt(),lh=Za(),ul=al(),On=ir(),_t=function(){};function Ae(i,e){_t(i);var t=this;hl.call(this),setTimeout(function(){t.doXhr(i,e)},0)}sh(Ae,hl);Ae._getReceiver=function(i,e,t){return t.sameOrigin?new On(e,ah):cl.enabled?new On(e,cl):ll.enabled&&t.sameScheme?new On(e,ll):ul.enabled()?new ul(i,e):new On(e,lh)};Ae.prototype.doXhr=function(i,e){var t=this,n=oh.addPath(i,"/info");_t("doXhr",n),this.xo=Ae._getReceiver(i,n,e),this.timeoutRef=setTimeout(function(){_t("timeout"),t._cleanup(!1),t.emit("finish")},Ae.timeout),this.xo.once("finish",function(r,s){_t("finish",r,s),t._cleanup(!0),t.emit("finish",r,s)})};Ae.prototype._cleanup=function(i){_t("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!i&&this.xo&&this.xo.close(),this.xo=null};Ae.prototype.close=function(){_t("close"),this.removeAllListeners(),this._cleanup(!1)};Ae.timeout=8e3;dl.exports=Ae});var gl=f((Lp,ml)=>{"use strict";var pl=yt();function Vt(i){this._transport=i,i.on("message",this._transportMessage.bind(this)),i.on("close",this._transportClose.bind(this))}Vt.prototype._transportClose=function(i,e){pl.postMessage("c",JSON.stringify([i,e]))};Vt.prototype._transportMessage=function(i){pl.postMessage("t",i)};Vt.prototype._send=function(i){this._transport.send(i)};Vt.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()};ml.exports=Vt});var vl=f((Bp,bl)=>{"use strict";var yl=K(),ch=ve(),uh=gl(),_l=rr(),sr=yt(),Mn=tr(),or=function(){};bl.exports=function(i,e){var t={};e.forEach(function(r){r.facadeTransport&&(t[r.facadeTransport.transportName]=r.facadeTransport)}),t[_l.transportName]=_l;var n;i.bootstrap_iframe=function(){var r;sr.currentWindowId=Mn.hash.slice(1);var s=function(o){if(o.source===parent&&(typeof n>"u"&&(n=o.origin),o.origin===n)){var a;try{a=JSON.parse(o.data)}catch{or("bad json",o.data);return}if(a.windowId===sr.currentWindowId)switch(a.type){case"s":var l;try{l=JSON.parse(a.data)}catch{or("bad json",a.data);break}var c=l[0],h=l[1],u=l[2],g=l[3];if(or(c,h,u,g),c!==i.version)throw new Error('Incompatible SockJS! Main site uses: "'+c+'", the iframe: "'+i.version+'".');if(!yl.isOriginEqual(u,Mn.href)||!yl.isOriginEqual(g,Mn.href))throw new Error("Can't connect to different domain from within an iframe. ("+Mn.href+", "+u+", "+g+")");r=new uh(new t[h](u,g));break;case"m":r._send(a.data);break;case"c":r&&r._close(),r=null;break}}};ch.attachEvent("message",s),sr.postMessage("s")}}});var Al=f((Fp,Cl)=>{"use strict";Ra();var hh=Ti(),dh=w(),Sl=He(),fh=qa(),Ht=K(),ph=ve(),mh=Ba(),gh=Sn(),yh=ft(),_h=ja(),ar=Cn(),wl=Ci(),xn=tr(),bh=$a(),El=Xa(),vh=fl(),x=function(){},Tl;function T(i,e,t){if(!(this instanceof T))return new T(i,e,t);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");wl.call(this),this.readyState=T.CONNECTING,this.extensions="",this.protocol="",t=t||{},t.protocols_whitelist&&_h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=t.transports,this._transportOptions=t.transportOptions||{},this._timeout=t.timeout||0;var n=t.sessionId||8;if(typeof n=="function")this._generateSessionId=n;else if(typeof n=="number")this._generateSessionId=function(){return Sl.string(n)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=t.server||Sl.numberString(1e3);var r=new hh(i);if(!r.host||!r.protocol)throw new SyntaxError("The URL '"+i+"' is invalid");if(r.hash)throw new SyntaxError("The URL must not contain a fragment");if(r.protocol!=="http:"&&r.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+r.protocol+"' is not allowed.");var s=r.protocol==="https:";if(xn.protocol==="https:"&&!s&&!Ht.isLoopbackAddr(r.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var o=e.sort();o.forEach(function(l,c){if(!l)throw new SyntaxError("The protocols entry '"+l+"' is invalid.");if(c<o.length-1&&l===o[c+1])throw new SyntaxError("The protocols entry '"+l+"' is duplicated.")});var a=Ht.getOrigin(xn.href);this._origin=a?a.toLowerCase():null,r.set("pathname",r.pathname.replace(/\/+$/,"")),this.url=r.href,x("using url",this.url),this._urlInfo={nullOrigin:!yh.hasDomain(),sameOrigin:Ht.isOriginEqual(this.url,xn.href),sameScheme:Ht.isSchemeEqual(this.url,xn.href)},this._ir=new vh(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}dh(T,wl);function kl(i){return i===1e3||i>=3e3&&i<=4999}T.prototype.close=function(i,e){if(i&&!kl(i))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===T.CLOSING||this.readyState===T.CLOSED)){var t=!0;this._close(i||1e3,e||"Normal closure",t)}};T.prototype.send=function(i){if(typeof i!="string"&&(i=""+i),this.readyState===T.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===T.OPEN&&this._transport.send(fh.quote(i))};T.version=Ui();T.CONNECTING=0;T.OPEN=1;T.CLOSING=2;T.CLOSED=3;T.prototype._receiveInfo=function(i,e){if(x("_receiveInfo",e),this._ir=null,!i){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(e),this._transUrl=i.base_url?i.base_url:this.url,i=gh.extend(i,this._urlInfo),x("info",i);var t=Tl.filterToEnabled(this._transportsWhitelist,i);this._transports=t.main,x(this._transports.length+" enabled transports"),this._connect()};T.prototype._connect=function(){for(var i=this._transports.shift();i;i=this._transports.shift()){if(x("attempt",i.transportName),i.needBody&&(!global.document.body||typeof global.document.readyState<"u"&&global.document.readyState!=="complete"&&global.document.readyState!=="interactive")){x("waiting for body"),this._transports.unshift(i),ph.attachEvent("load",this._connect.bind(this));return}var e=Math.max(this._timeout,this._rto*i.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e),x("using timeout",e);var t=Ht.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),n=this._transportOptions[i.transportName];x("transport url",t);var r=new i(t,this._transUrl,n);r.on("message",this._transportMessage.bind(this)),r.once("close",this._transportClose.bind(this)),r.transportName=i.transportName,this._transport=r;return}this._close(2e3,"All transports failed",!1)};T.prototype._transportTimeout=function(){x("_transportTimeout"),this.readyState===T.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};T.prototype._transportMessage=function(i){x("_transportMessage",i);var e=this,t=i.slice(0,1),n=i.slice(1),r;switch(t){case"o":this._open();return;case"h":this.dispatchEvent(new ar("heartbeat")),x("heartbeat",this.transport);return}if(n)try{r=JSON.parse(n)}catch{x("bad json",n)}if(typeof r>"u"){x("empty payload",n);return}switch(t){case"a":Array.isArray(r)&&r.forEach(function(s){x("message",e.transport,s),e.dispatchEvent(new El(s))});break;case"m":x("message",this.transport,r),this.dispatchEvent(new El(r));break;case"c":Array.isArray(r)&&r.length===2&&this._close(r[0],r[1],!0);break}};T.prototype._transportClose=function(i,e){if(x("_transportClose",this.transport,i,e),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!kl(i)&&i!==2e3&&this.readyState===T.CONNECTING){this._connect();return}this._close(i,e)};T.prototype._open=function(){x("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===T.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=T.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new ar("open")),x("connected",this.transport)):this._close(1006,"Server lost session")};T.prototype._close=function(i,e,t){x("_close",this.transport,i,e,t,this.readyState);var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===T.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=T.CLOSING,setTimeout(function(){this.readyState=T.CLOSED,n&&this.dispatchEvent(new ar("error"));var r=new bh("close");r.wasClean=t||!1,r.code=i||1e3,r.reason=e,this.dispatchEvent(r),this.onmessage=this.onclose=this.onerror=null,x("disconnected")}.bind(this),0)};T.prototype.countRTO=function(i){return i>100?4*i:300+i};Cl.exports=function(i){return Tl=mh(i),vl()(T,i),T}});var Ol=f((jp,Nl)=>{"use strict";var Sh=Aa();Nl.exports=Al()(Sh);"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)});var Ve={LF:`
`,NULL:"\0"};var kt=class i{constructor(e){let{command:t,headers:n,body:r,binaryBody:s,escapeHeaderValues:o,skipContentLengthHeader:a}=e;this.command=t,this.headers=Object.assign({},n||{}),s?(this._binaryBody=s,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=a||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}static fromRawFrame(e,t){let n={},r=s=>s.replace(/^\s+|\s+$/g,"");for(let s of e.headers.reverse()){let o=s.indexOf(":"),a=r(s[0]),l=r(s[1]);t&&e.command!=="CONNECT"&&e.command!=="CONNECTED"&&(l=i.hdrValueUnEscape(l)),n[a]=l}return new i({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){let e=this.serializeCmdAndHeaders();return this.isBinaryBody?i.toUnit8Array(e,this._binaryBody).buffer:e+this._body+Ve.NULL}serializeCmdAndHeaders(){let e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(let t of Object.keys(this.headers||{})){let n=this.headers[t];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?e.push(`${t}:${i.hdrValueEscape(`${n}`)}`):e.push(`${t}:${n}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(Ve.LF)+Ve.LF+Ve.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){let e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?new TextEncoder().encode(e).length:0}static toUnit8Array(e,t){let n=new TextEncoder().encode(e),r=new Uint8Array([0]),s=new Uint8Array(n.length+t.length+r.length);return s.set(n),s.set(t,n.length),s.set(r,n.length+t.length),s}static marshall(e){return new i(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}};var cn=class{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let n;if(typeof e=="string"?n=this._encoder.encode(e):n=new Uint8Array(e),t&&n[n.length-1]!==0){let r=new Uint8Array(n.length+1);r.set(n,0),r[n.length]=0,n=r}for(let r=0;r<n.length;r++){let s=n[r];this._onByte(s)}}_collectFrame(e){if(e!==0&&e!==13){if(e===10){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(e)}}_collectCommand(e){if(e!==13){if(e===10){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_collectHeaders(e){if(e!==13){if(e===10){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(e)}}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===58){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(e)}_collectHeaderValue(e){if(e!==13){if(e===10){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_setupCollectBody(){let e=this._results.headers.filter(t=>t[0]==="content-length")[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){if(e===0){this._retrievedBody();return}this._consumeByte(e)}_collectBodyFixedSize(e){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(e)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){let e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}};var ne;(function(i){i[i.CONNECTING=0]="CONNECTING",i[i.OPEN=1]="OPEN",i[i.CLOSING=2]="CLOSING",i[i.CLOSED=3]="CLOSED"})(ne=ne||(ne={}));var $;(function(i){i[i.ACTIVE=0]="ACTIVE",i[i.DEACTIVATING=1]="DEACTIVATING",i[i.INACTIVE=2]="INACTIVE"})($=$||($={}));var P=class{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}};P.V1_0="1.0";P.V1_1="1.1";P.V1_2="1.2";P.default=new P([P.V1_2,P.V1_1,P.V1_0]);function Vs(i,e){i.terminate=function(){let t=()=>{};this.onerror=t,this.onmessage=t,this.onopen=t;let n=new Date,r=Math.random().toString().substring(2,8),s=this.onclose;this.onclose=o=>{let a=new Date().getTime()-n.getTime();e(`Discarded socket (#${r})  closed after ${a}ms, with code/reason: ${o.code}/${o.reason}`)},this.close(),s?.call(i,{code:4001,reason:`Quick discarding socket (#${r}) without waiting for the shutdown sequence.`,wasClean:!1})}}var un=class{constructor(e,t,n){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:r=>{this.debug(`connected to server ${r.headers.server}`),this._connected=!0,this._connectedVersion=r.headers.version,this._connectedVersion===P.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(r.headers),this.onConnect(r)},MESSAGE:r=>{let s=r.headers.subscription,o=this._subscriptions[s]||this.onUnhandledMessage,a=r,l=this,c=this._connectedVersion===P.V1_2?a.headers.ack:a.headers["message-id"];a.ack=(h={})=>l.ack(c,s,h),a.nack=(h={})=>l.nack(c,s,h),o(a)},RECEIPT:r=>{let s=this._receiptWatchers[r.headers["receipt-id"]];s?(s(r),delete this._receiptWatchers[r.headers["receipt-id"]]):this.onUnhandledReceipt(r)},ERROR:r=>{this.onStompError(r)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){let e=new cn(t=>{let n=kt.fromRawFrame(t,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${n}`),(this._serverFrameHandlers[n.command]||this.onUnhandledFrame)(n)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){let n=t.data instanceof ArrayBuffer?new TextDecoder().decode(t.data):t.data;this.debug(`<<< ${n}`)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=t=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(t)},this._webSocket.onerror=t=>{this.onWebSocketError(t)},this._webSocket.onopen=()=>{let t=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),t["accept-version"]=this.stompVersions.supportedVersions(),t["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:t})}}_setupHeartbeat(e){if(e.version!==P.V1_1&&e.version!==P.V1_2||!e["heart-beat"])return;let[t,n]=e["heart-beat"].split(",").map(r=>parseInt(r,10));if(this.heartbeatOutgoing!==0&&n!==0){let r=Math.max(this.heartbeatOutgoing,n);this.debug(`send PING every ${r}ms`),this._pinger=setInterval(()=>{this._webSocket.readyState===ne.OPEN&&(this._webSocket.send(Ve.LF),this.debug(">>> PING"))},r)}if(this.heartbeatIncoming!==0&&t!==0){let r=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${r}ms`),this._ponger=setInterval(()=>{let s=Date.now()-this._lastServerActivityTS;s>r*2&&(this.debug(`did not receive server activity for the last ${s}ms`),this._closeOrDiscardWebsocket())},r)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===ne.CONNECTING||this._webSocket.readyState===ne.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&Vs(this._webSocket,e=>this.debug(e)),this._webSocket.terminate()}_transmit(e){let{command:t,headers:n,body:r,binaryBody:s,skipContentLengthHeader:o}=e,a=new kt({command:t,headers:n,body:r,binaryBody:s,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o}),l=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${l}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&typeof l=="string"&&(l=new TextEncoder().encode(l)),typeof l!="string"||!this.splitLargeFrames)this._webSocket.send(l);else{let c=l;for(;c.length>0;){let h=c.substring(0,this.maxWebSocketChunkSize);c=c.substring(this.maxWebSocketChunkSize),this._webSocket.send(h),this.debug(`chunk sent = ${h.length}, remaining = ${c.length}`)}}}dispose(){if(this.connected)try{let e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt=`close-${this._counter++}`),this.watchForReceipt(e.receipt,t=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(t)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else(this._webSocket.readyState===ne.CONNECTING||this._webSocket.readyState===ne.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){let{destination:t,headers:n,body:r,binaryBody:s,skipContentLengthHeader:o}=e,a=Object.assign({destination:t},n);this._transmit({command:"SEND",headers:a,body:r,binaryBody:s,skipContentLengthHeader:o})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,n={}){n=Object.assign({},n),n.id||(n.id=`sub-${this._counter++}`),n.destination=e,this._subscriptions[n.id]=t,this._transmit({command:"SUBSCRIBE",headers:n});let r=this;return{id:n.id,unsubscribe(s){return r.unsubscribe(n.id,s)}}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){let t=e||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:t}});let n=this;return{id:t,commit(){n.commit(t)},abort(){n.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,n={}){n=Object.assign({},n),this._connectedVersion===P.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"ACK",headers:n})}nack(e,t,n={}){return n=Object.assign({},n),this._connectedVersion===P.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"NACK",headers:n})}};var hn=class{constructor(e={}){this.stompVersions=P.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=$.INACTIVE;let t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===$.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}configure(e){Object.assign(this,e)}activate(){let e=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState($.ACTIVE),this._connect()};this.state===$.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}_connect(){return Et(this,null,function*(){if(yield this.beforeConnect(),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");let e=this._createWebSocket();this._stompHandler=new un(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:t=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(t)},onDisconnect:t=>{this.onDisconnect(t)},onStompError:t=>{this.onStompError(t)},onWebSocketClose:t=>{this._stompHandler=void 0,this.state===$.DEACTIVATING&&this._changeState($.INACTIVE),this.onWebSocketClose(t),this.active&&this._schedule_reconnect()},onWebSocketError:t=>{this.onWebSocketError(t)},onUnhandledMessage:t=>{this.onUnhandledMessage(t)},onUnhandledReceipt:t=>{this.onUnhandledReceipt(t)},onUnhandledFrame:t=>{this.onUnhandledFrame(t)}}),this._stompHandler.start()})}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else if(this.brokerURL)e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return e.binaryType="arraybuffer",e}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout(()=>{this._connect()},this.reconnectDelay))}deactivate(){return Et(this,arguments,function*(e={}){let t=e.force||!1,n=this.active,r;if(this.state===$.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState($.DEACTIVATING),this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==ne.CLOSED){let s=this._stompHandler.onWebSocketClose;r=new Promise((o,a)=>{this._stompHandler.onWebSocketClose=l=>{s(l),o()}})}else return this._changeState($.INACTIVE),Promise.resolve();return t?this._stompHandler?.discardWebsocket():n&&this._disposeStompHandler(),r})}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,n={}){return this._checkConnection(),this._stompHandler.subscribe(e,t,n)}unsubscribe(e,t={}){this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t,n={}){this._checkConnection(),this._stompHandler.ack(e,t,n)}nack(e,t,n={}){this._checkConnection(),this._stompHandler.nack(e,t,n)}};var Ml=yc(Ol());var Re=class i{constructor(e){this.configService=e;this.socketUrl=`${this.configService.productsApiUrl}/ws`,setTimeout(()=>{this.autoReconnect()},100)}stompClient=null;socketUrl;notificationsSubject=new Vr([]);notifications$=this.notificationsSubject.asObservable();injector=k(ot);isConnected=!1;autoReconnect(){if(!this.isConnected)try{this.injector.get(W).getToken()&&(console.log("\u{1F504} Auto-reconnexion WebSocket STOMP apr\xE8s rafra\xEEchissement !"),this.connect())}catch(e){console.warn("\u26A0\uFE0F Impossible d'auto-reconnecter WebSocket, l'injector est d\xE9truit.")}}connect(){if(console.log("\u{1F4E1} Tentative r\xE9elle de connexion STOMP..."),this.isConnected){console.log("\u{1F535} WebSocket STOMP est d\xE9j\xE0 actif, pas besoin de reconnecter.");return}let t=this.injector.get(W).getToken();if(!t){console.warn("\u26A0\uFE0F Aucun token JWT trouv\xE9 ! Connexion WebSocket annul\xE9e.");return}console.log("\u2705 Token trouv\xE9, activation du WebSocket STOMP...");let n=new Ml.default(this.socketUrl);if(this.stompClient=new hn({webSocketFactory:()=>n,connectHeaders:{Authorization:`Bearer ${t}`},debug:r=>console.log(`STOMP Debug: ${r}`),reconnectDelay:5e3}),this.stompClient.onConnect=()=>{console.log("\u2705 Connect\xE9 au WebSocket STOMP !"),this.isConnected=!0,this.stompClient?.subscribe("/topic/products",r=>{let s=JSON.parse(r.body).message;this.addNotification(s)})},this.stompClient.onStompError=r=>{console.error("\u274C Erreur STOMP:",r)},!this.stompClient){console.error("\u274C STOMP Client is not initialized.");return}if(this.stompClient.active){console.warn("\u26A0\uFE0F STOMP Client is already connected.");return}this.stompClient.activate()}addNotification(e){let t=this.notificationsSubject.value;this.notificationsSubject.next([...t,e])}disconnect(){this.stompClient&&(this.stompClient.deactivate(),console.log("\u{1F50C} D\xE9connect\xE9 de WebSocket"),this.isConnected=!1)}socketIsConnected(){return this.isConnected}static \u0275fac=function(t){return new(t||i)(_e(ct))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};function Eh(i,e){if(i&1&&(O(0,"li"),q(1),C()),i&2){let t=e.$implicit;M(),Tt(" ",t," ")}}function wh(i,e){if(i&1&&(O(0,"ul"),ue(1,Eh,2,1,"li",2),C()),i&2){let t=je();M(),te("ngForOf",t.notifications)}}function Th(i,e){i&1&&(O(0,"p"),q(1,"Aucune notification pour l'instant."),C())}var In=class i{constructor(e){this.notificationService=e}notifications=[];notificationSubscription;ngOnInit(){this.notificationSubscription=this.notificationService.notifications$.subscribe(e=>{this.notifications=e})}ngOnDestroy(){this.notificationSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(ee(Re))};static \u0275cmp=be({type:i,selectors:[["app-notification"]],decls:5,vars:2,consts:[[1,"notification-container"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,n){t&1&&(O(0,"div",0)(1,"h3"),q(2,"\u{1F514} Notifications"),C(),ue(3,wh,2,1,"ul",1)(4,Th,2,0,"p",1),C()),t&2&&(M(3),te("ngIf",n.notifications.length>0),M(),te("ngIf",n.notifications.length===0))},dependencies:[lt,rs,at],styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;width:300px;background:#fff;box-shadow:0 4px 6px #0000001a;border-radius:8px;padding:15px}h3[_ngcontent-%COMP%]{margin-top:0}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{padding:10px;background:#f9f9f9;margin-bottom:5px;border-radius:5px}"]})};function kh(i,e){i&1&&(ri(0),wt(1,"app-notification"),si())}function Ch(i,e){i&1&&(ri(0),O(1,"h1"),q(2,"Veuillez vous connecter"),C(),O(3,"a",3),q(4,"Se Connecter"),C(),si())}var Pn=class i{constructor(e,t){this.authService=e;this.notificationService=t}title="fronted-angular";credentials={username:"",password:""};ngOnInit(){this.authService.getToken()&&(console.log("\u{1F30D} L'utilisateur est connect\xE9, tentative de reconnexion WebSocket..."),this.notificationService.socketIsConnected||this.notificationService.connect())}isAuthenticated(){return this.authService.isLoggedIn()}static \u0275fac=function(t){return new(t||i)(ee(W),ee(Re))};static \u0275cmp=be({type:i,selectors:[["app-root"]],decls:9,vars:2,consts:[["routerLink","/",1,"logo"],["routerLink","/add-product",1,"add-product-link"],[4,"ngIf"],["routerLink","/login",1,"login-link"]],template:function(t,n){t&1&&(O(0,"header")(1,"nav")(2,"a",0),q(3,"Accueil"),C(),O(4,"a",1),q(5,"Ajouter un produit"),C()()(),ue(6,kh,2,0,"ng-container",2)(7,Ch,5,0,"ng-container",2),wt(8,"router-outlet")),t&2&&(M(6),te("ngIf",n.isAuthenticated()),M(),te("ngIf",!n.isAuthenticated()))},dependencies:[lt,at,ms,ds,fs,In],styles:["header[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 20px;display:flex;justify-content:space-between;align-items:center}header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;gap:15px}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:700}header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function Ah(i,e){if(i&1){let t=Yr();O(0,"div",1)(1,"button",2),rn("click",function(){zr(t);let r=je();return Wr(r.action())}),q(2),C()()}if(i&2){let t=je();M(2),Tt(" ",t.data.action," ")}}var Nh=["label"];function Oh(i,e){}var Mh=Math.pow(2,31)-1,zt=class{_overlayRef;instance;containerInstance;_afterDismissed=new Fe;_afterOpened=new Fe;_onAction=new Fe;_durationTimeoutId;_dismissedByAction=!1;constructor(e,t){this._overlayRef=t,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,Mh))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Dl=new ti("MatSnackBarData"),bt=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},xh=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=nn({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return i})(),Ih=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=nn({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return i})(),Ph=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=nn({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return i})(),ql=(()=>{class i{snackBarRef=k(zt);data=k(Dl);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=be({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,r){n&1&&(O(0,"div",0),q(1),C(),ue(2,Ah,3,1,"div",1)),n&2&&(M(),Tt(" ",r.data.message,`
`),M(),Jr(r.hasAction?2:-1))},dependencies:[an,xh,Ih,Ph],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return i})(),Rh={snackBarState:Os("state",[fi("void, hidden",Ue({transform:"scale(0.8)",opacity:0})),fi("visible",Ue({transform:"scale(1)",opacity:1})),pi("* => visible",di("150ms cubic-bezier(0, 0, 0.2, 1)")),pi("* => void, * => hidden",di("75ms cubic-bezier(0.4, 0.0, 1, 1)",Ue({opacity:0})))])},Dh=(()=>{class i extends Ls{_ngZone=k(tn);_elementRef=k($r);_changeDetectorRef=k(is);_platform=k(Ts);snackBarConfig=k(bt);_document=k(sn);_trackedModals=new Set;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new Fe;_onExit=new Fe;_onEnter=new Fe;_animationState="void";_live;_label;_role;_liveElementId=k(Ns).getId("mat-snack-bar-container-live-");constructor(){super();let t=this.snackBarConfig;t.politeness==="assertive"&&!t.announcementMessage?this._live="assertive":t.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),n}attachTemplatePortal(t){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),n}attachDomPortal=t=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(t);return this._afterPortalAttached(),n};onAnimationEnd(t){let{fromState:n,toState:r}=t;if((r==="void"&&n!=="void"||r==="hidden")&&this._completeExit(),r==="visible"){let s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let t=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(o=>t.classList.add(o)):t.classList.add(n)),this._exposeToModals();let r=this._label.nativeElement,s="mdc-snackbar__label";r.classList.toggle(s,!r.querySelector(`.${s}`))}_exposeToModals(){let t=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let s=n[r],o=s.getAttribute("aria-owns");this._trackedModals.add(s),o?o.indexOf(t)===-1&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{let n=t.getAttribute("aria-owns");if(n){let r=n.replace(this._liveElementId,"").trim();r.length>0?t.setAttribute("aria-owns",r):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),n.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=be({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,r){if(n&1&&(oi(_i,7),oi(Nh,7)),n&2){let s;ai(s=li())&&(r._portalOutlet=s.first),ai(s=li())&&(r._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(n,r){n&1&&es("@state.done",function(o){return r.onAnimationEnd(o)}),n&2&&Zr("@state",r._animationState)},features:[Gr],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(O(0,"div",1)(1,"div",2,0)(3,"div",3),ue(4,Oh,0,0,"ng-template",4),C(),wt(5,"div"),C()()),n&2&&(M(5),Xr("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[_i],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[Rh.snackBarState]}})}return i})();function qh(){return new bt}var Lh=new ti("mat-snack-bar-default-options",{providedIn:"root",factory:qh}),Wt=(()=>{class i{_overlay=k(js);_live=k(As);_injector=k(ot);_breakpointObserver=k(ks);_parentSnackBar=k(i,{optional:!0,skipSelf:!0});_defaultConfig=k(Lh);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=ql;snackBarContainerComponent=Dh;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(){}openFromComponent(t,n){return this._attach(t,n)}openFromTemplate(t,n){return this._attach(t,n)}open(t,n="",r){let s=le(le({},this._defaultConfig),r);return s.data={message:t,action:n},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,n){let r=n&&n.viewContainerRef&&n.viewContainerRef.injector,s=ot.create({parent:r||this._injector,providers:[{provide:bt,useValue:n}]}),o=new yi(this.snackBarContainerComponent,n.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(t,n){let r=le(le(le({},new bt),this._defaultConfig),n),s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new zt(o,s);if(t instanceof Kr){let l=new qs(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{let l=this._createInjector(r,a),c=new yi(t,void 0,l),h=o.attachComponentPortal(c);a.instance=h.instance}return this._breakpointObserver.observe(Cs.HandsetPortrait).pipe(Hr(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,n){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),n.duration&&n.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(n.duration))}_createOverlay(t){let n=new Fs;n.direction=t.direction;let r=this._overlay.position().global(),s=t.direction==="rtl",o=t.horizontalPosition==="left"||t.horizontalPosition==="start"&&!s||t.horizontalPosition==="end"&&s,a=!o&&t.horizontalPosition!=="center";return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),t.verticalPosition==="top"?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(t,n){let r=t&&t.viewContainerRef&&t.viewContainerRef.injector;return ot.create({parent:r||this._injector,providers:[{provide:zt,useValue:n},{provide:Dl,useValue:t.data}]})}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Rn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=ii({type:i});static \u0275inj=ei({providers:[Wt],imports:[Us,Bs,ln,gi,ql,gi]})}return i})();function Fh(i,e){if(i&1&&(O(0,"p",7),q(1),C()),i&2){let t=je();M(),ts(t.error)}}var Dn=class i{constructor(e,t,n,r,s){this.authService=e;this.router=t;this.route=n;this.notificationService=r;this.snackBar=s}credentials={username:"",password:""};error=null;login(){let e=this.route.snapshot.queryParams.returnUrl||"/";this.authService.login(this.credentials).subscribe({next:t=>{t&&t.token&&(this.notificationService.socketIsConnected()||this.notificationService.connect(),this.router.navigate([e]),this.showSuccessMessage("Connexion r\xE9ussie !"))},error:t=>{}})}showSuccessMessage(e){this.snackBar.open(e,"Fermer",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]})}static \u0275fac=function(t){return new(t||i)(ee(W),ee(Me),ee(hs),ee(Re),ee(Wt))};static \u0275cmp=be({type:i,selectors:[["app-login"]],decls:15,vars:5,consts:[[1,"login-container"],[3,"ngSubmit"],["appearance","fill",3,"floatLabel"],["matInput","","name","username","required","",3,"ngModelChange","ngModel"],["matInput","","name","password","type","password","required","",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,n){t&1&&(O(0,"div",0)(1,"h2"),q(2,"Connexion"),C(),O(3,"form",1),rn("ngSubmit",function(){return n.login()}),O(4,"mat-form-field",2)(5,"mat-label"),q(6,"Username"),C(),O(7,"input",3),hi("ngModelChange",function(s){return ui(n.credentials.username,s)||(n.credentials.username=s),s}),C()(),O(8,"mat-form-field",2)(9,"mat-label"),q(10,"Mot de passe"),C(),O(11,"input",4),hi("ngModelChange",function(s){return ui(n.credentials.password,s)||(n.credentials.password=s),s}),C()(),O(12,"button",5),q(13,"Se connecter"),C(),ue(14,Fh,2,1,"p",6),C()()),t&2&&(M(4),te("floatLabel","always"),M(3),ci("ngModel",n.credentials.username),M(),te("floatLabel","always"),M(3),ci("ngModel",n.credentials.password),M(3),te("ngIf",n.error))},dependencies:[lt,at,ws,Ss,gs,ys,_s,Es,vs,bs,Ps,Is,xs,Ds,Rs,ln,an,Rn],styles:[".error-snackbar[_ngcontent-%COMP%]{background-color:#d32f2f!important;color:#fff!important;font-weight:700}"]})};var Ye=class i{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.isLoggedIn()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(t){return new(t||i)(_e(W),_e(Me))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ll=[{path:"",loadComponent:()=>import("./chunk-XG6LQWU2.js").then(i=>i.ListProductComponent),data:{title:"home"},canActivate:[Ye]},{path:"products",loadComponent:()=>import("./chunk-XG6LQWU2.js").then(i=>i.ListProductComponent),data:{title:"products"},canActivate:[Ye]},{path:"add-product",loadComponent:()=>import("./chunk-P25FO2MR.js").then(i=>i.AddProductComponent),canActivate:[Ye]},{path:"products/edit/:id",loadComponent:()=>import("./chunk-ITRH26GU.js").then(i=>i.EditProductComponent),canActivate:[Ye]},{path:"login",component:Dn},{path:"not-found",loadComponent:()=>import("./chunk-3SBC5N7V.js").then(i=>i.NotFoundComponent)},{path:"**",redirectTo:"not-found"}];function Bl(i){return new E(3e3,!1)}function jh(){return new E(3100,!1)}function Uh(){return new E(3101,!1)}function Vh(i){return new E(3001,!1)}function Hh(i){return new E(3003,!1)}function zh(i){return new E(3004,!1)}function Wh(i,e){return new E(3005,!1)}function $h(){return new E(3006,!1)}function Kh(){return new E(3007,!1)}function Qh(i,e){return new E(3008,!1)}function Gh(i){return new E(3002,!1)}function Xh(i,e,t,n,r){return new E(3010,!1)}function Jh(){return new E(3011,!1)}function Yh(){return new E(3012,!1)}function Zh(){return new E(3200,!1)}function ed(){return new E(3202,!1)}function td(){return new E(3013,!1)}function nd(i){return new E(3014,!1)}function id(i){return new E(3015,!1)}function rd(i){return new E(3016,!1)}function sd(i,e){return new E(3404,!1)}function od(i){return new E(3502,!1)}function ad(i){return new E(3503,!1)}function ld(){return new E(3300,!1)}function cd(i){return new E(3504,!1)}function ud(i){return new E(3301,!1)}function hd(i,e){return new E(3302,!1)}function dd(i){return new E(3303,!1)}function fd(i,e){return new E(3400,!1)}function pd(i){return new E(3401,!1)}function md(i){return new E(3402,!1)}function gd(i,e){return new E(3505,!1)}function De(i){switch(i.length){case 0:return new ut;case 1:return i[0];default:return new mi(i)}}function Yl(i,e,t=new Map,n=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),h=c==o,u=h&&a||new Map;l.forEach((g,_)=>{let p=_,b=g;if(_!=="offset")switch(p=i.normalizePropertyName(p,r),b){case on:b=t.get(_);break;case he:b=n.get(_);break;default:b=i.normalizeStyleValue(_,p,b,r);break}u.set(p,b)}),h||s.push(u),a=u,o=c}),r.length)throw od(r);return s}function Mr(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&cr(t,"start",i)));break;case"done":i.onDone(()=>n(t&&cr(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&cr(t,"destroy",i)));break}}function cr(i,e,t){let n=t.totalTime,r=!!t.disabled,s=xr(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,r),o=i._data;return o!=null&&(s._data=o),s}function xr(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function X(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function Fl(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var yd=typeof document>"u"?null:document.documentElement;function Ir(i){let e=i.parentNode||i.host||null;return e===yd?null:e}function _d(i){return i.substring(1,6)=="ebkit"}var Ze=null,jl=!1;function bd(i){Ze||(Ze=vd()||{},jl=Ze.style?"WebkitAppearance"in Ze.style:!1);let e=!0;return Ze.style&&!_d(i)&&(e=i in Ze.style,!e&&jl&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Ze.style)),e}function vd(){return typeof document<"u"?document.body:null}function Zl(i,e){for(;e;){if(e===i)return!0;e=Ir(e)}return!1}function ec(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var Pr=(()=>{class i{validateStyleProperty(t){return bd(t)}containsElement(t,n){return Zl(t,n)}getParentElement(t){return Ir(t)}query(t,n,r){return ec(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new ut(r,s)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac})}return i})(),nt=class{static NOOP=new Pr},it=class{};var Sd=1e3,tc="{{",Ed="}}",nc="ng-enter",mr="ng-leave",qn="ng-trigger",Un=".ng-trigger",Ul="ng-animating",gr=".ng-animating";function Ne(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:yr(parseFloat(e[1]),e[2])}function yr(i,e){switch(e){case"s":return i*Sd;default:return i}}function Vn(i,e,t){return i.hasOwnProperty("duration")?i:wd(i,e,t)}function wd(i,e,t){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof i=="string"){let a=i.match(n);if(a===null)return e.push(Bl(i)),{duration:0,delay:0,easing:""};r=yr(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=yr(parseFloat(l),a[4]));let c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(jh()),a=!0),s<0&&(e.push(Uh()),a=!0),a&&e.splice(l,0,Bl(i))}return{duration:r,delay:s,easing:o}}function Td(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function ye(i,e,t){e.forEach((n,r)=>{let s=Rr(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n})}function tt(i,e){e.forEach((t,n)=>{let r=Rr(n);i.style[r]=""})}function $t(i){return Array.isArray(i)?i.length==1?i[0]:Ms(i):i}function kd(i,e,t){let n=e.params||{},r=ic(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(Vh(s))})}var _r=new RegExp(`${tc}\\s*(.+?)\\s*${Ed}`,"g");function ic(i){let e=[];if(typeof i=="string"){let t;for(;t=_r.exec(i);)e.push(t[1]);_r.lastIndex=0}return e}function Qt(i,e,t){let n=`${i}`,r=n.replace(_r,(s,o)=>{let a=e[o];return a==null&&(t.push(Hh(o)),a=""),a.toString()});return r==n?i:r}var Cd=/-+([a-z0-9])/g;function Rr(i){return i.replace(Cd,(...e)=>e[1].toUpperCase())}function Ad(i,e){return i===0||e===0}function Nd(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,Dr(i,a)))}}return e}function G(i,e,t){switch(e.type){case v.Trigger:return i.visitTrigger(e,t);case v.State:return i.visitState(e,t);case v.Transition:return i.visitTransition(e,t);case v.Sequence:return i.visitSequence(e,t);case v.Group:return i.visitGroup(e,t);case v.Animate:return i.visitAnimate(e,t);case v.Keyframes:return i.visitKeyframes(e,t);case v.Style:return i.visitStyle(e,t);case v.Reference:return i.visitReference(e,t);case v.AnimateChild:return i.visitAnimateChild(e,t);case v.AnimateRef:return i.visitAnimateRef(e,t);case v.Query:return i.visitQuery(e,t);case v.Stagger:return i.visitStagger(e,t);default:throw zh(e.type)}}function Dr(i,e){return window.getComputedStyle(i)[e]}var Od=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Hn=class extends it{normalizePropertyName(e,t){return Rr(e)}normalizeStyleValue(e,t,n,r){let s="",o=n.toString().trim();if(Od.has(t)&&n!==0&&n!=="0")if(typeof n=="number")s="px";else{let a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Wh(e,n))}return o+s}};var zn="*";function Md(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>xd(n,t,e)):t.push(i),t}function xd(i,e,t){if(i[0]==":"){let l=Id(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(id(i)),e;let r=n[1],s=n[2],o=n[3];e.push(Vl(r,o));let a=r==zn&&o==zn;s[0]=="<"&&!a&&e.push(Vl(o,r))}function Id(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(rd(i)),"* => *"}}var Ln=new Set(["true","1"]),Bn=new Set(["false","0"]);function Vl(i,e){let t=Ln.has(i)||Bn.has(i),n=Ln.has(e)||Bn.has(e);return(r,s)=>{let o=i==zn||i==r,a=e==zn||e==s;return!o&&t&&typeof r=="boolean"&&(o=r?Ln.has(i):Bn.has(i)),!a&&n&&typeof s=="boolean"&&(a=s?Ln.has(e):Bn.has(e)),o&&a}}var rc=":self",Pd=new RegExp(`s*${rc}s*,?`,"g");function sc(i,e,t,n){return new br(i).build(e,t,n)}var Hl="",br=class{_driver;constructor(e){this._driver=e}build(e,t,n){let r=new vr(t);return this._resetContextStyleTimingState(r),G(this,$t(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Hl,e.collectedStyles=new Map,e.collectedStyles.set(Hl,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push($h()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==v.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==v.Transition){let l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(Kh())}),{type:v.Trigger,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){let s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{ic(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(Qh(e.name,[...s.values()]))}return{type:v.State,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=G(this,$t(e.animation),t),r=Md(e.expr,t.errors);return{type:v.Transition,matchers:r,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:et(e.options)}}visitSequence(e,t){return{type:v.Sequence,steps:e.steps.map(n=>G(this,n,t)),options:et(e.options)}}visitGroup(e,t){let n=t.currentTime,r=0,s=e.steps.map(o=>{t.currentTime=n;let a=G(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:v.Group,steps:s,options:et(e.options)}}visitAnimate(e,t){let n=Ld(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:Ue({});if(s.type==v.Keyframes)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};n.easing&&(c.easing=n.easing),o=Ue(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:v.Animate,timings:n,style:r,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===he?n.push(a):t.errors.push(Gh(a)):n.push(new Map(Object.entries(a)));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(tc)>=0){s=!0;break}}}),{type:v.Style,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l),u=!0;h&&(s!=r&&s>=h.startTime&&r<=h.endTime&&(t.errors.push(Xh(l,h.startTime,h.endTime,s,r)),u=!1),s=h.startTime),u&&c.set(l,{startTime:s,endTime:r}),t.options&&kd(a,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:v.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Jh()),n;let r=1,s=0,o=[],a=!1,l=!1,c=0,h=e.steps.map(I=>{let R=this._makeStyleAst(I,t),j=R.offset!=null?R.offset:qd(R.styles),L=0;return j!=null&&(s++,L=R.offset=j),l=l||L<0||L>1,a=a||L<c,c=L,o.push(L),R});l&&t.errors.push(Yh()),a&&t.errors.push(Zh());let u=e.steps.length,g=0;s>0&&s<u?t.errors.push(ed()):s==0&&(g=r/(u-1));let _=u-1,p=t.currentTime,b=t.currentAnimateTimings,A=b.duration;return h.forEach((I,R)=>{let j=g>0?R==_?1:g*R:o[R],L=j*A;t.currentTime=p+b.delay+L,b.duration=L,this._validateStyleAst(I,t),I.offset=j,n.styles.push(I)}),n}visitReference(e,t){return{type:v.Reference,animation:G(this,$t(e.animation),t),options:et(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:v.AnimateChild,options:et(e.options)}}visitAnimateRef(e,t){return{type:v.AnimateRef,animation:this.visitReference(e.animation,t),options:et(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=Rd(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,X(t.collectedStyles,t.currentQuerySelector,new Map);let a=G(this,$t(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:v.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:et(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(td());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Vn(e.timings,t.errors,!0);return{type:v.Stagger,animation:G(this,$t(e.animation),t),timings:n,options:null}}};function Rd(i){let e=!!i.split(/\s*,\s*/).find(t=>t==rc);return e&&(i=i.replace(Pd,"")),i=i.replace(/@\*/g,Un).replace(/@\w+/g,t=>Un+"-"+t.slice(1)).replace(/:animating/g,gr),[i,e]}function Dd(i){return i?le({},i):null}var vr=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function qd(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Ld(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let s=Vn(i,e).duration;return ur(s,0,"")}let t=i;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=ur(0,0,"");return s.dynamic=!0,s.strValue=t,s}let r=Vn(t,e);return ur(r.duration,r.delay,r.easing)}function et(i){return i?(i=le({},i),i.params&&(i.params=Dd(i.params))):i={},i}function ur(i,e,t){return{duration:i,delay:e,easing:t}}function qr(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var Gt=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Bd=1,Fd=":enter",jd=new RegExp(Fd,"g"),Ud=":leave",Vd=new RegExp(Ud,"g");function oc(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return new Sr().buildKeyframes(i,e,t,n,r,s,o,a,l,c)}var Sr=class{buildKeyframes(e,t,n,r,s,o,a,l,c,h=[]){c=c||new Gt;let u=new Er(e,t,c,r,s,h,[]);u.options=l;let g=l.delay?Ne(l.delay):0;u.currentTimeline.delayNextStep(g),u.currentTimeline.setStyles([o],null,u.errors,l),G(this,n,u);let _=u.timelines.filter(p=>p.containsAnimation());if(_.length&&a.size){let p;for(let b=_.length-1;b>=0;b--){let A=_[b];if(A.element===t){p=A;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,u.errors,l)}return _.length?_.map(p=>p.buildKeyframes()):[qr(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:Ne(Qt(s,r?.params??{},t.errors));n.delayNextStep(o)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime,o=n.duration!=null?Ne(n.duration):null,a=n.delay!=null?Ne(n.delay):null;return o!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),G(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,r=t,s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==v.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Wn);let o=Ne(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>G(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],r=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Ne(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),G(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,r=t.params?Qt(n,t.params,t.errors):n;return Vn(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());let s=e.style;s.type==v.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ne(r.delay):0;s&&(t.previousNode.type===v.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Wn);let o=n,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;let u=t.createSubContext(e.options,c);s&&u.delayNextStep(s),c===t.element&&(l=u.currentTimeline),G(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe();let g=u.currentTimeline.currentTime;o=Math.max(o,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime;break}let h=t.currentTimeline;l&&h.delayNextStep(l);let u=h.currentTime;G(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}},Wn={},Er=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Wn;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=l||new $n(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,r=this.options;n.duration!=null&&(r.duration=Ne(n.duration)),n.delay!=null&&(r.delay=Ne(n.delay));let s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Qt(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){let r=t||this.element,s=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Wn,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new wr(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(jd,"."+this._enterClassName),e=e.replace(Vd,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&a.length==0&&o.push(nd(t)),a}},$n=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Bd,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||he),this._currentKeyframe.set(t,he);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);let s=r&&r.params||{},o=Hd(e,this._globalTimelineStyles);for(let[a,l]of o){let c=Qt(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??he),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((h,u)=>{h===on?e.add(u):h===he&&t.add(u)}),n||c.set("offset",l/this.duration),r.push(c)});let s=[...e.values()],o=[...t.values()];if(n){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return qr(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},wr=class extends $n{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=n+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let c=new Map(e[0]);c.set("offset",zl(a)),s.push(c);let h=e.length-1;for(let u=1;u<=h;u++){let g=new Map(e[u]),_=g.get("offset"),p=t+_*n;g.set("offset",zl(p/o)),s.push(g)}n=o,t=0,r="",e=s}return qr(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}};function zl(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function Hd(i,e){let t=new Map,n;return i.forEach(r=>{if(r==="*"){n??=e.keys();for(let s of n)t.set(s,he)}else for(let[s,o]of r)t.set(s,o)}),t}function Wl(i,e,t,n,r,s,o,a,l,c,h,u,g){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:u,errors:g}}var hr={},Kn=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return zd(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,h){let u=[],g=this.ast.options&&this.ast.options.params||hr,_=a&&a.params||hr,p=this.buildStyles(n,_,u),b=l&&l.params||hr,A=this.buildStyles(r,b,u),I=new Set,R=new Map,j=new Map,L=r==="void",rt={params:ac(b,g),delay:this.ast.options?.delay},oe=h?[]:oc(e,t,this.ast.animation,s,o,p,A,rt,c,u),U=0;return oe.forEach(V=>{U=Math.max(V.duration+V.delay,U)}),u.length?Wl(t,this._triggerName,n,r,L,p,A,[],[],R,j,U,u):(oe.forEach(V=>{let qe=V.element,st=X(R,qe,new Set);V.preStyleProps.forEach(Le=>st.add(Le));let Lr=X(j,qe,new Set);V.postStyleProps.forEach(Le=>Lr.add(Le)),qe!==t&&I.add(qe)}),Wl(t,this._triggerName,n,r,L,p,A,oe,[...I.values()],R,j,U))}};function zd(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}function ac(i,e){let t=le({},e);return Object.entries(i).forEach(([n,r])=>{r!=null&&(t[n]=r)}),t}var Tr=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,r=ac(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Qt(o,r,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(a,o)})}),n}};function Wd(i,e,t){return new kr(i,e,t)}var kr=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new Tr(r.style,s,n))}),$l(this.states,"true","1"),$l(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Kn(e,r,this.states))}),this.fallbackTransition=$d(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function $d(i,e,t){let n=[(o,a)=>!0],r={type:v.Sequence,steps:[],options:null},s={type:v.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new Kn(i,s,e)}function $l(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var Kd=new Gt,Cr=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],r=[],s=sc(this._driver,t,n,r);if(n.length)throw ad(n);this._animations.set(e,s)}_buildPlayer(e,t,n){let r=e.element,s=Yl(this._normalizer,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=oc(this._driver,t,s,nc,mr,new Map,new Map,n,Kd,r),o.forEach(h=>{let u=X(a,h.element,new Map);h.postStyleProps.forEach(g=>u.set(g,null))})):(r.push(ld()),o=[]),r.length)throw cd(r);a.forEach((h,u)=>{h.forEach((g,_)=>{h.set(_,this._driver.computeStyle(u,_,he))})});let l=o.map(h=>{let u=a.get(h.element);return this._buildPlayer(h,new Map,u)}),c=De(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw ud(e);return t}listen(e,t,n,r){let s=xr(t,"","","");return Mr(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if(n=="register"){this.register(e,r[0]);return}if(n=="create"){let o=r[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},Kl="ng-animate-queued",Qd=".ng-animate-queued",dr="ng-animate-disabled",Gd=".ng-animate-disabled",Xd="ng-star-inserted",Jd=".ng-star-inserted",Yd=[],lc={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zd={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},se="__ng_removed",Xt=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=tf(r),n){let s=e,{value:o}=s,a=Ur(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(r=>{n[r]==null&&(n[r]=t[r])})}}},Kt="void",fr=new Xt(Kt),Ar=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,Z(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw hd(n,t);if(n==null||n.length==0)throw dd(t);if(!nf(n))throw fd(n,t);let s=X(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);let a=X(this._engine.statesByElement,e,new Map);return a.has(t)||(Z(e,qn),Z(e,qn+"-"+t),a.set(t,fr)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw pd(e);return t}trigger(e,t,n,r=!0){let s=this._getTrigger(t),o=new Jt(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Z(e,qn),Z(e,qn+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Xt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=fr),!(c.value===Kt)&&l.value===c.value){if(!of(l.params,c.params)){let b=[],A=s.matchStyles(l.value,l.params,b),I=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{tt(e,A),ye(e,I)})}return}let g=X(this._engine.playersByElement,e,[]);g.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let _=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!_){if(!r)return;_=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Z(e,Kl),o.onStart(()=>{vt(e,Kl)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);let A=this._engine.playersByElement.get(e);if(A){let I=A.indexOf(o);I>=0&&A.splice(I,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,Un,!0);n.forEach(r=>{if(r[se])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let h=this.trigger(e,c,Kt,r);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&De(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let r=new Set;t.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let l=this._triggers.get(o).fallbackTransition,c=n.get(o)||fr,h=new Xt(Kt),u=new Jt(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:h,player:u,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){let s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{let s=e[se];(!s||s===lc)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Z(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){let l=xr(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,Mr(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{let s=n.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Nr=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new Ar(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let r of n.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}}return t}trigger(e,t,n,r){if(Fn(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Fn(t))return;let s=t[se];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Z(e,dr)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),vt(e,dr))}removeNode(e,t,n){if(Fn(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[se]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return Fn(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Un,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,gr,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return De(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[se];if(t&&t.setForRemoval){if(e[se]=lc,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(dr)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Gd,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];Z(r,Xd)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?De(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw md(e)}_flushAnimations(e,t){let n=new Gt,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(d=>{h.add(d);let m=this.driver.query(d,Qd,!0);for(let y=0;y<m.length;y++)h.add(m[y])});let u=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=Xl(g,this.collectedEnterElements),p=new Map,b=0;_.forEach((d,m)=>{let y=nc+b++;p.set(m,y),d.forEach(S=>Z(S,y))});let A=[],I=new Set,R=new Set;for(let d=0;d<this.collectedLeaveElements.length;d++){let m=this.collectedLeaveElements[d],y=m[se];y&&y.setForRemoval&&(A.push(m),I.add(m),y.hasAnimation?this.driver.query(m,Jd,!0).forEach(S=>I.add(S)):R.add(m))}let j=new Map,L=Xl(g,Array.from(I));L.forEach((d,m)=>{let y=mr+b++;j.set(m,y),d.forEach(S=>Z(S,y))}),e.push(()=>{_.forEach((d,m)=>{let y=p.get(m);d.forEach(S=>vt(S,y))}),L.forEach((d,m)=>{let y=j.get(m);d.forEach(S=>vt(S,y))}),A.forEach(d=>{this.processLeaveNode(d)})});let rt=[],oe=[];for(let d=this._namespaceList.length-1;d>=0;d--)this._namespaceList[d].drainQueuedTransitions(t).forEach(y=>{let S=y.player,D=y.element;if(rt.push(S),this.collectedEnterElements.length){let B=D[se];if(B&&B.setForMove){if(B.previousTriggersValues&&B.previousTriggersValues.has(y.triggerName)){let Be=B.previousTriggersValues.get(y.triggerName),J=this.statesByElement.get(y.element);if(J&&J.has(y.triggerName)){let Yt=J.get(y.triggerName);Yt.value=Be,J.set(y.triggerName,Yt)}}S.destroy();return}}let ae=!u||!this.driver.containsElement(u,D),z=j.get(D),Oe=p.get(D),N=this._buildInstruction(y,n,Oe,z,ae);if(N.errors&&N.errors.length){oe.push(N);return}if(ae){S.onStart(()=>tt(D,N.fromStyles)),S.onDestroy(()=>ye(D,N.toStyles)),r.push(S);return}if(y.isFallbackTransition){S.onStart(()=>tt(D,N.fromStyles)),S.onDestroy(()=>ye(D,N.toStyles)),r.push(S);return}let jr=[];N.timelines.forEach(B=>{B.stretchStartingKeyframe=!0,this.disabledNodes.has(B.element)||jr.push(B)}),N.timelines=jr,n.append(D,N.timelines);let gc={instruction:N,player:S,element:D};o.push(gc),N.queriedElements.forEach(B=>X(a,B,[]).push(S)),N.preStyleProps.forEach((B,Be)=>{if(B.size){let J=l.get(Be);J||l.set(Be,J=new Set),B.forEach((Yt,Zn)=>J.add(Zn))}}),N.postStyleProps.forEach((B,Be)=>{let J=c.get(Be);J||c.set(Be,J=new Set),B.forEach((Yt,Zn)=>J.add(Zn))})});if(oe.length){let d=[];oe.forEach(m=>{d.push(gd(m.triggerName,m.errors))}),rt.forEach(m=>m.destroy()),this.reportError(d)}let U=new Map,V=new Map;o.forEach(d=>{let m=d.element;n.has(m)&&(V.set(m,m),this._beforeAnimationBuild(d.player.namespaceId,d.instruction,U))}),r.forEach(d=>{let m=d.element;this._getPreviousPlayers(m,!1,d.namespaceId,d.triggerName,null).forEach(S=>{X(U,m,[]).push(S),S.destroy()})});let qe=A.filter(d=>Jl(d,l,c)),st=new Map;Gl(st,this.driver,R,c,he).forEach(d=>{Jl(d,l,c)&&qe.push(d)});let Le=new Map;_.forEach((d,m)=>{Gl(Le,this.driver,new Set(d),l,on)}),qe.forEach(d=>{let m=st.get(d),y=Le.get(d);st.set(d,new Map([...m?.entries()??[],...y?.entries()??[]]))});let Yn=[],Br=[],Fr={};o.forEach(d=>{let{element:m,player:y,instruction:S}=d;if(n.has(m)){if(h.has(m)){y.onDestroy(()=>ye(m,S.toStyles)),y.disabled=!0,y.overrideTotalTime(S.totalTime),r.push(y);return}let D=Fr;if(V.size>1){let z=m,Oe=[];for(;z=z.parentNode;){let N=V.get(z);if(N){D=N;break}Oe.push(z)}Oe.forEach(N=>V.set(N,D))}let ae=this._buildAnimation(y.namespaceId,S,U,s,Le,st);if(y.setRealPlayer(ae),D===Fr)Yn.push(y);else{let z=this.playersByElement.get(D);z&&z.length&&(y.parentPlayer=De(z)),r.push(y)}}else tt(m,S.fromStyles),y.onDestroy(()=>ye(m,S.toStyles)),Br.push(y),h.has(m)&&r.push(y)}),Br.forEach(d=>{let m=s.get(d.element);if(m&&m.length){let y=De(m);d.setRealPlayer(y)}}),r.forEach(d=>{d.parentPlayer?d.syncPlayerEvents(d.parentPlayer):d.destroy()});for(let d=0;d<A.length;d++){let m=A[d],y=m[se];if(vt(m,mr),y&&y.hasAnimation)continue;let S=[];if(a.size){let ae=a.get(m);ae&&ae.length&&S.push(...ae);let z=this.driver.query(m,gr,!0);for(let Oe=0;Oe<z.length;Oe++){let N=a.get(z[Oe]);N&&N.length&&S.push(...N)}}let D=S.filter(ae=>!ae.destroyed);D.length?rf(this,m,D):this.processLeaveNode(m)}return A.length=0,Yn.forEach(d=>{this.players.push(d),d.onDone(()=>{d.destroy();let m=this.players.indexOf(d);this.players.splice(m,1)}),d.play()}),Yn}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==Kt;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){let r=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,h=c!==s,u=X(n,c,[]);this._getPreviousPlayers(c,h,o,a,t.toState).forEach(_=>{let p=_.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),_.destroy(),u.push(_)})}tt(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){let a=t.triggerName,l=t.element,c=[],h=new Set,u=new Set,g=t.timelines.map(p=>{let b=p.element;h.add(b);let A=b[se];if(A&&A.removedBeforeQueried)return new ut(p.duration,p.delay);let I=b!==l,R=sf((n.get(b)||Yd).map(U=>U.getRealPlayer())).filter(U=>{let V=U;return V.element?V.element===b:!1}),j=s.get(b),L=o.get(b),rt=Yl(this._normalizer,p.keyframes,j,L),oe=this._buildPlayer(p,rt,R);if(p.subTimeline&&r&&u.add(b),I){let U=new Jt(e,a,b);U.setRealPlayer(oe),c.push(U)}return oe});c.forEach(p=>{X(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>ef(this.playersByQueriedElement,p.element,p))}),h.forEach(p=>Z(p,Ul));let _=De(g);return _.onDestroy(()=>{h.forEach(p=>vt(p,Ul)),ye(l,t.toStyles)}),u.forEach(p=>{X(r,p,[]).push(_)}),_}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new ut(e.duration,e.delay)}},Jt=class{namespaceId;triggerName;element;_player=new ut;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>Mr(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){X(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function ef(i,e,t){let n=i.get(e);if(n){if(n.length){let r=n.indexOf(t);n.splice(r,1)}n.length==0&&i.delete(e)}return n}function tf(i){return i??null}function Fn(i){return i&&i.nodeType===1}function nf(i){return i=="start"||i=="done"}function Ql(i,e){let t=i.style.display;return i.style.display=e??"none",t}function Gl(i,e,t,n,r){let s=[];t.forEach(l=>s.push(Ql(l)));let o=[];n.forEach((l,c)=>{let h=new Map;l.forEach(u=>{let g=e.computeStyle(c,u,r);h.set(u,g),(!g||g.length==0)&&(c[se]=Zd,o.push(c))}),i.set(c,h)});let a=0;return t.forEach(l=>Ql(l,s[a++])),o}function Xl(i,e){let t=new Map;if(i.forEach(a=>t.set(a,[])),e.length==0)return t;let n=1,r=new Set(e),s=new Map;function o(a){if(!a)return n;let l=s.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:r.has(c)?l=n:l=o(c),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==n&&t.get(l).push(a)}),t}function Z(i,e){i.classList?.add(e)}function vt(i,e){i.classList?.remove(e)}function rf(i,e,t){De(t).onDone(()=>i.processLeaveNode(e))}function sf(i){let e=[];return cc(i,e),e}function cc(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof mi?cc(n.players,e):e.push(n)}}function of(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}function Jl(i,e,t){let n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}var St=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new Nr(e.body,t,n),this._timelineEngine=new Cr(e.body,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let l=[],c=[],h=sc(this._driver,s,l,c);if(l.length)throw sd(r,l);a=Wd(r,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if(n.charAt(0)=="@"){let[s,o]=Fl(n),a=r;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if(n.charAt(0)=="@"){let[o,a]=Fl(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function af(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=pr(e[0]),e.length>1&&(n=pr(e[e.length-1]))):e instanceof Map&&(t=pr(e)),t||n?new lf(i,t,n):null}var lf=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ye(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ye(this._element,this._initialStyles),this._endStyles&&(ye(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(tt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tt(this._element,this._endStyles),this._endStyles=null),ye(this._element,this._initialStyles),this._state=3)}}return i})();function pr(i){let e=null;return i.forEach((t,n)=>{cf(n)&&(e=e||new Map,e.set(n,t))}),e}function cf(i){return i==="display"||i==="position"}var Qn=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&e.set(r,this._finished?n:Dr(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Gn=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Zl(e,t)}getParentElement(e){return Ir(e)}query(e,t,n){return ec(e,t,n)}computeStyle(e,t,n){return Dr(e,t)}animate(e,t,n,r,s,o=[]){let a=r==0?"both":"forwards",l={duration:n,delay:r,fill:a};s&&(l.easing=s);let c=new Map,h=o.filter(_=>_ instanceof Qn);Ad(n,r)&&h.forEach(_=>{_.currentSnapshot.forEach((p,b)=>c.set(b,p))});let u=Td(t).map(_=>new Map(_));u=Nd(e,u,c);let g=af(e,u);return new Qn(e,u,l,g)}};var jn="@",uc="@.disabled",Xn=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==jn&&t==uc?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,r){return this.delegate.listen(e,t,n,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Or=class extends Xn{factory;constructor(e,t,n,r,s){super(t,n,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==jn?t.charAt(1)=="."&&t==uc?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,r){if(t.charAt(0)==jn){let s=uf(e),o=t.slice(1),a="";return o.charAt(0)!=jn&&([o,a]=hf(o)),this.engine.listen(this.namespaceId,s,o,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,n,l)})}return this.delegate.listen(e,t,n,r)}};function uf(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function hf(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var Jn=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(e,t){let n="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,h=c.get(r);if(!h){let u=()=>c.delete(r);h=new Xn(n,r,this.engine,u),c.set(r,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new Or(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var ff=(()=>{class i extends St{constructor(t,n,r){super(t,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(_e(sn),_e(nt),_e(it))};static \u0275prov=ce({token:i,factory:i.\u0275fac})}return i})();function pf(){return new Hn}function mf(i,e,t){return new Jn(i,e,t)}var hc=[{provide:it,useFactory:pf},{provide:St,useClass:ff},{provide:Qr,useFactory:mf,deps:[as,St,tn]}],Qm=[{provide:nt,useFactory:()=>new Gn},{provide:ni,useValue:"BrowserAnimations"},...hc],gf=[{provide:nt,useClass:Pr},{provide:ni,useValue:"NoopAnimations"},...hc];function dc(){return[...gf]}var fc=(i,e)=>{let t=k(W),n=k(Me);if(["/login","/register"].some(o=>i.url.includes(o)))return e(i);let s=t.getToken();return s?i=i.clone({headers:i.headers.set("Authorization",`Bearer ${s}`)}):console.warn("Interceptor - No token found, request sent without Authorization"),e(i).pipe(en(o=>(o.status===401&&(console.error("\u{1F6A8} 401 Unauthorized - Redirection vers /login"),n.navigate(["/login"])),Zt(()=>o))))};var pc=(i,e)=>{let t=k(Wt),n=k(Me),r=k(W);return e(i).pipe(en(s=>{let o=s.error?.message||"Une erreur inattendue s\u2019est produite.",a="error-snackbar";if(s.status===0)o="\u{1F30D} Connexion impossible. V\xE9rifiez votre r\xE9seau.",a="network-snackbar";else if(s.status!==void 0)switch(s.status){case 400:o=o=s.error?.message||"\u26A0\uFE0F Requ\xEAte invalide. V\xE9rifiez les informations saisies.",a="warning-snackbar";break;case 401:o="\u{1F512} Session expir\xE9e. Veuillez vous reconnecter.",a="auth-snackbar",r.logout(),n.navigate(["/login"]);break;case 403:o="\u26D4 Acc\xE8s refus\xE9 ! Vous n\u2019\xEAtes pas autoris\xE9.",a="auth-snackbar";break;case 404:o="\u274C Ressource introuvable.",a="error-snackbar";break;case 500:o="\u{1F4A5} Erreur serveur. Veuillez r\xE9essayer plus tard.",a="error-snackbar";break;default:o=s.error?.message||o,a="error-snackbar"}else o="\u{1F30D} Connexion impossible. V\xE9rifiez votre r\xE9seau.",a="network-snackbar";return t.open(o,"FERMER",{duration:6e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a}),Zt(()=>new Error(o))}))};var mc={providers:[ns({eventCoalescing:!0}),ps(Ll),us(cs()),ss(os([fc,pc])),Rn,dc(),ct]};function yf(i){return Et(this,null,function*(){yield i.loadConfig()})}ls(Pn,mc).then(i=>{let e=i.injector.get(ct);return yf(e)}).catch(i=>console.error(i));
